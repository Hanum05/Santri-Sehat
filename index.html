<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SantriSehat Pro: Panduan Lengkap Kespro ‚ú®</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        darkBg: '#0f172a',
                        darkCard: '#1e293b',
                        darkText: '#e2e8f0'
                    }
                }
            }
        }
    </script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" rel="stylesheet">
    <!-- Tambahkan Font Caveat untuk gaya handwritten -->
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;500;600;700&family=Caveat:wght@700&display=swap" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Quicksand:wght@400;500;600;700&display=swap');
        
        body {
            font-family: 'Quicksand', sans-serif;
            background-color: #fffafb;
            color: #374151;
            scroll-behavior: smooth;
            padding-bottom: 120px; /* Extra padding for floating nav */
            transition: background-color 0.3s, color 0.3s;
        }

        /* Dark Mode Transitions */
        html.dark body {
            background-color: #0f172a; /* Slate 900 */
            color: #e2e8f0;
        }

        .interactive-svg:hover .part-shape {
            fill: #fb7185 !important;
            filter: drop-shadow(0 0 8px rgba(225, 29, 72, 0.4));
            cursor: pointer;
        }

        .content-section {
            display: none;
        }

        .content-section.active {
            display: block;
            animation: fadeInUp 0.5s ease-out;
        }

        /* Navigasi Custom Style */
        .nav-container {
            box-shadow: 0 -4px 20px rgba(0,0,0,0.05);
        }

        .btn-nav {
            position: relative;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-end;
            height: 100%;
        }

        /* Ikon Lingkaran Putih */
        .icon-circle {
            background-color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            border: 1px solid #fce7f3;
            position: absolute;
            transition: all 0.3s ease;
            z-index: 10;
        }
        
        /* Dark mode icon circle */
        html.dark .icon-circle {
            background-color: #1e293b; /* Slate 800 */
            border-color: #334155;
            color: #e2e8f0;
        }

        /* Standard Icon Position (Halfway up) */
        .btn-nav .icon-circle {
            width: 48px;
            height: 48px;
            top: -24px;
        }

        /* Center Button (Calculator) Position */
        .btn-nav.center-btn .icon-circle {
            width: 64px;
            height: 64px;
            top: -32px;
            background: linear-gradient(135deg, #ec4899 0%, #be123c 100%);
            color: white !important;
            border: 4px solid #fffafb;
            box-shadow: 0 10px 15px -3px rgba(219, 39, 119, 0.4);
        }
        
        html.dark .btn-nav.center-btn .icon-circle {
            border-color: #0f172a; /* Match dark body */
        }

        .btn-nav.active-btn .icon-circle {
            transform: translateY(-5px);
            border-color: #db2777;
            box-shadow: 0 10px 15px -3px rgba(219, 39, 119, 0.2);
        }
        
        .btn-nav.active-btn:not(.center-btn) .icon-circle {
            background-color: #fff1f2;
            color: #db2777;
        }
        
        html.dark .btn-nav.active-btn:not(.center-btn) .icon-circle {
            background-color: #334155;
            color: #f472b6;
        }

        .nav-label {
            margin-top: 28px;
            font-size: 10px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: -0.025em;
            color: #9ca3af;
            transition: color 0.3s;
        }

        .btn-nav.active-btn .nav-label {
            color: #db2777;
        }
        
        html.dark .btn-nav.active-btn .nav-label {
            color: #f472b6;
        }

        /* Timeline Styles */
        .timeline-item {
            position: relative;
            padding-left: 2rem;
            padding-bottom: 2rem;
            border-left: 2px solid #e5e7eb;
        }
        html.dark .timeline-item {
            border-left-color: #334155;
        }
        .timeline-item:last-child {
            border-left: 2px solid transparent;
        }
        .timeline-dot {
            position: absolute;
            left: -9px;
            top: 0;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            border: 2px solid white;
        }
        html.dark .timeline-dot {
            border-color: #1e293b;
        }

        /* Chat Styles */
        #ai-chat-window {
            display: none;
            position: fixed;
            bottom: 100px;
            right: 20px;
            left: 20px;
            max-width: 450px;
            height: 60vh;
            background: white;
            border-radius: 28px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.2);
            z-index: 100;
            flex-direction: column;
            border: 1px solid #fce7f3;
        }
        html.dark #ai-chat-window {
            background: #1e293b;
            border-color: #334155;
        }

        .materi-card {
            background: white;
            border-radius: 24px;
            padding: 24px;
            margin-bottom: 20px;
            border: 1px solid #f3f4f6;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
            transition: background-color 0.3s, border-color 0.3s;
        }
        
        html.dark .materi-card {
            background-color: #1e293b; /* Slate 800 */
            border-color: #334155;
            color: #e2e8f0;
        }

        .info-pill {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 999px;
            font-size: 11px;
            font-weight: 700;
            text-transform: uppercase;
            margin-bottom: 8px;
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="min-h-screen dark:bg-slate-900 dark:text-slate-200">

    <!-- Header -->
    <header class="bg-white/90 dark:bg-slate-900/90 backdrop-blur-md sticky top-0 z-50 px-6 py-4 flex justify-between items-center border-b border-pink-50 dark:border-slate-800 shadow-sm transition-colors duration-300">
        <div class="flex items-center gap-3">
            <div class="w-10 h-10 bg-gradient-to-tr from-pink-500 to-rose-400 rounded-2xl flex items-center justify-center text-white font-bold shadow-lg">S</div>
            <div>
                <h1 class="font-bold text-pink-600 dark:text-pink-400 text-lg leading-none">SantriSehat</h1>
                <p class="text-[10px] text-gray-400 dark:text-slate-500 font-medium">Pro-Education v2.1</p>
            </div>
        </div>
        <div class="flex items-center gap-2">
            <button onclick="toggleDarkMode()" class="w-10 h-10 rounded-full flex items-center justify-center bg-gray-100 dark:bg-slate-800 text-gray-600 dark:text-yellow-400 hover:bg-gray-200 dark:hover:bg-slate-700 transition">
                <!-- Sun Icon -->
                <svg class="w-5 h-5 hidden dark:block" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path></svg>
                <!-- Moon Icon -->
                <svg class="w-5 h-5 block dark:hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path></svg>
            </button>
            <button onclick="toggleAIChat()" class="flex items-center gap-2 bg-pink-50 dark:bg-pink-900/30 text-pink-600 dark:text-pink-300 px-4 py-2 rounded-2xl text-xs font-bold hover:bg-pink-100 dark:hover:bg-pink-900/50 transition">
                <span class="animate-pulse">‚ú®</span> Tanya Ukhti AI
            </button>
        </div>
    </header>

    <main class="max-w-4xl mx-auto p-4 md:p-8">

        <!-- Banner Utama -->
        <div class="relative overflow-hidden bg-gradient-to-br from-pink-500 to-rose-600 rounded-[2.5rem] p-8 mb-10 text-white shadow-2xl shadow-rose-200 dark:shadow-none">
            <div class="relative z-10">
                <h2 id="banner-title" class="text-3xl font-bold mb-3">Ahlan wa Sahlan!</h2>
                <p id="banner-subtitle" class="text-pink-100 text-sm leading-relaxed max-w-[80%]">
                    Pusat informasi kesehatan reproduksi syar'i dan medis untuk santriwati cerdas.
                </p>
            </div>
            <!-- Hijabi Character SVG -->
            <div class="absolute right-[-10px] bottom-[-10px] opacity-20">
                <svg width="180" height="180" viewBox="0 0 100 100">
                    <circle cx="50" cy="40" r="30" fill="white" />
                    <path d="M20 40 Q20 5 50 5 Q80 5 80 40 L85 95 Q50 100 15 95 Z" fill="white" />
                </svg>
            </div>
        </div>

        <!-- SECTION 1: PENGERTIAN MENDALAM -->
        <div id="section-1" class="content-section active">
            <div class="materi-card">
                <span class="info-pill bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-200">Wawasan Dasar</span>
                <h3 class="text-2xl font-bold text-gray-800 dark:text-white mb-4">Apa itu Kesehatan Reproduksi?</h3>
                <p class="text-gray-600 dark:text-gray-300 leading-relaxed mb-4 text-justify">
                    Kesehatan Reproduksi (Kespro) seringkali disalahpahami hanya sebatas urusan "menikah" atau "melahirkan". Padahal, definisinya jauh lebih luas. Menurut Organisasi Kesehatan Dunia (WHO) dan kesepakatan medis internasional, Kespro adalah keadaan sejahtera secara utuh meliputi <span class="font-bold">fisik, mental, dan sosial</span>, bukan hanya sekadar bebas dari penyakit atau kecacatan dalam segala aspek yang berhubungan dengan sistem reproduksi, fungsi, serta prosesnya. 
                    <br><br>
                    Bagi seorang santriwati menjaga kesehatan reproduksi (Kespro) bukan sekadar urusan medis, melainkan bentuk nyata dalam menjaga amanah Allah SWT. Dalam Islam, upaya menjaga kesehatan diri merupakan bagian dari <strong>Hifdzun Nafs</strong> (Menjaga Jiwa), yaitu salah satu tujuan utama syariat (Maqashid asy-Syariah) untuk memastikan keberlangsungan hidup manusia yang berkualitas.
                    <br><br>
                    Sebagai dasar pentingnya menjaga kebersihan dan kesehatan diri, Rasulullah SAW bersabda:
                    <br>
                    <span class="block text-center text-xl font-serif my-3 text-gray-800 dark:text-gray-200">ÿßŸÑÿ∑ŸáŸàÿ± ÿ¥ÿ∑ÿ± ÿßŸÑÿ•ŸäŸÖÿßŸÜ</span>
                    <span class="block text-center italic">"Kesucian (kebersihan) itu adalah setengah dari iman."</span>
                    <span class="block text-center text-sm font-bold">(HR. Muslim)</span>
                </p>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-6">
                    <div class="bg-pink-50 dark:bg-pink-900/20 p-6 rounded-2xl border border-pink-100 dark:border-pink-800">
                        <h4 class="font-bold text-pink-700 dark:text-pink-300 text-sm mb-3 flex items-center gap-2">
                            <span class="bg-pink-200 dark:bg-pink-800 p-1 rounded">üè•</span> Aspek Fisik
                        </h4>
                        <p class="text-sm text-pink-800 dark:text-pink-200 leading-relaxed text-justify">
                            Meliputi kondisi organ vital yang berfungsi normal, bebas dari infeksi jamur, bakteri, atau virus, serta terhindar dari penyakit menular.
                        </p>
                    </div>
                    <div class="bg-indigo-50 dark:bg-indigo-900/20 p-6 rounded-2xl border border-indigo-100 dark:border-indigo-800">
                        <h4 class="font-bold text-indigo-700 dark:text-indigo-300 text-sm mb-3 flex items-center gap-2">
                            <span class="bg-indigo-200 dark:bg-indigo-800 p-1 rounded">üß†</span> Aspek Mental
                        </h4>
                        <p class="text-sm text-indigo-800 dark:text-indigo-200 leading-relaxed text-justify">
                            Berkaitan dengan kesiapan psikologis dan emosional. Santriwati harus memiliki pengetahuan yang benar agar tidak merasa cemas atau takut.
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- SECTION 2: ANATOMI DETAIL -->
        <div id="section-2" class="content-section">
            <div class="text-center mb-8">
                <h3 class="text-2xl font-bold text-gray-800 dark:text-white">Eksplorasi Anatomi Wanita</h3>
                <p class="text-gray-600 dark:text-gray-400 text-sm max-w-md mx-auto mt-2">Pahami keajaiban sistem penciptaan manusia dalam tubuhmu. Ketuk setiap bagian organ di bawah ini.</p>
            </div>

            <div class="bg-white dark:bg-slate-800 rounded-[3rem] p-10 shadow-sm border border-pink-50 dark:border-slate-700 mb-8 flex justify-center relative overflow-hidden transition-colors duration-300">
                <svg viewBox="0 0 220 200" width="100%" class="max-w-[320px] interactive-svg">
                    <!-- Uterus -->
                    <path class="part-shape transition-all duration-300" d="M80 70 Q110 45 140 70 L130 130 Q110 145 90 130 Z" fill="#fecdd3" stroke="#e11d48" stroke-width="2.5" onclick="showDetail('Rahim (Uterus)', 'Rahim adalah organ berotot tebal berbentuk seperti buah pir terbalik. Dinding rahim terdiri dari lapisan Endometrium yang luruh saat haid.')" />
                    <!-- Fallopian -->
                    <path class="part-shape" d="M80 75 Q45 55 30 85" fill="none" stroke="#e11d48" stroke-width="4.5" stroke-linecap="round" onclick="showDetail('Tuba Falopi', 'Saluran penghubung Ovarium ke Rahim, tempat terjadinya pembuahan.')" />
                    <path class="part-shape" d="M140 75 Q175 55 190 85" fill="none" stroke="#e11d48" stroke-width="4.5" stroke-linecap="round" onclick="showDetail('Tuba Falopi', 'Saluran ini berfungsi vital sebagai jembatan kehidupan.')" />
                    <!-- Ovaries -->
                    <circle class="part-shape" cx="30" cy="95" r="12" fill="#fb7185" onclick="showDetail('Ovarium', 'Pabrik sel telur dan penghasil hormon Estrogen & Progesteron.')" />
                    <circle class="part-shape" cx="190" cy="95" r="12" fill="#fb7185" onclick="showDetail('Ovarium', 'Melepaskan sel telur setiap bulan (Ovulasi).')" />
                    <!-- Vagina -->
                    <rect class="part-shape" x="95" y="135" width="30" height="45" rx="6" fill="#fbcfe8" stroke="#e11d48" stroke-width="1.5" onclick="showDetail('Vagina', 'Liang senggama yang menghubungkan rahim dengan luar tubuh. Memiliki pH asam alami.')" />
                    <!-- Labels -->
                    <text x="88" y="40" class="anatomy-label" style="fill:#9f1239; font-weight:bold; font-size:12px;">RAHIM</text>
                    <text x="5" y="125" class="anatomy-label" style="fill:#be123c; font-weight:bold; font-size:10px;">OVARIUM</text>
                    <text x="165" y="125" class="anatomy-label" style="fill:#be123c; font-weight:bold; font-size:10px;">OVARIUM</text>
                </svg>
            </div>

            <div id="detail-card" class="materi-card border-l-8 border-rose-500 bg-rose-50 dark:bg-rose-900/20 min-h-[140px] transition-all duration-300">
                <h4 id="detail-title" class="font-bold text-rose-700 dark:text-rose-300 text-xl mb-3">Pilih Bagian Organ</h4>
                <p id="detail-desc" class="text-sm text-rose-800 dark:text-rose-200 leading-relaxed text-justify">Ketuk salah satu bagian diagram organ reproduksi di atas.</p>
            </div>

            <!-- New Block: Panduan Warna -->
            <div class="materi-card border-t-8 border-rose-400 shadow-lg p-0 overflow-hidden mt-8">
                <!-- Image 1: Warna Darah -->
                <div class="w-full bg-[#F8D8DF] dark:bg-[#B84860] relative p-6 flex justify-center items-center transition-colors duration-300">
                    <img src="Warna_Darah.png" alt="Panduan Warna Darah Haid" class="w-full h-auto max-w-[600px] object-contain drop-shadow-sm rounded-xl block" onerror="this.parentElement.innerHTML='<div class=\'flex flex-col items-center justify-center h-48 text-rose-800 dark:text-rose-200 text-center\'><span class=\'text-2xl mb-2\'>ü©∏</span><strong>File Tidak Ditemukan</strong><span class=\'text-xs\'>Pastikan file <code>Warna_Darah.png</code> ada</span></div>'">
                </div>

                <!-- Image 2: Warna Keputihan -->
                <div class="w-full bg-white dark:bg-slate-800 p-6 flex justify-center items-center border-t border-slate-100 dark:border-slate-700">
                    <img src="Warna_Keputihan.png" alt="Panduan Warna Keputihan" class="w-full h-auto max-w-[512px] object-contain drop-shadow-sm rounded-xl block" onerror="this.parentElement.innerHTML='<div class=\'flex flex-col items-center justify-center h-48 text-slate-500 dark:text-slate-400 text-center\'><span class=\'text-2xl mb-2\'>‚ö™</span><strong>File Tidak Ditemukan</strong><span class=\'text-xs\'>Pastikan file <code>Warna_Keputihan.png</code> ada</span></div>'">
                </div>
                
                <div class="p-6 border-t border-slate-100 dark:border-slate-700">
                    <h4 class="font-bold text-gray-800 dark:text-white mb-2">Panduan Indikator Kesehatan</h4>
                    <p class="text-sm text-gray-600 dark:text-gray-300 text-justify">
                        Kenali kondisi kesehatanmu melalui perubahan warna darah haid dan cairan keputihan. Segera konsultasi jika menemukan warna yang mengindikasikan infeksi.
                    </p>
                </div>
            </div>
        </div>

        <!-- SECTION CALCULATOR -->
        <div id="section-calc" class="content-section">
            <h3 class="text-2xl font-bold text-gray-800 dark:text-white mb-6 text-center">Kalkulator Siklus & Kesuburan</h3>
            
            <div class="materi-card border-t-8 border-rose-500 shadow-xl">
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2">Hari Pertama Haid Terakhir (HPHT)</label>
                        <input type="date" id="calc-date" class="w-full p-4 rounded-xl border-2 border-pink-100 dark:border-slate-600 focus:border-pink-400 focus:outline-none bg-pink-50/50 dark:bg-slate-700 text-gray-700 dark:text-white font-medium">
                    </div>
                    <div>
                        <label class="block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2">Rata-rata Siklus (Hari)</label>
                        <div class="flex items-center gap-3">
                            <button onclick="adjustCycle(-1)" class="w-10 h-10 rounded-full bg-pink-100 dark:bg-slate-700 text-pink-600 dark:text-pink-400 font-bold hover:bg-pink-200 dark:hover:bg-slate-600 transition">-</button>
                            <input type="number" id="calc-cycle" value="28" class="flex-grow p-4 rounded-xl border-2 border-pink-100 dark:border-slate-600 dark:bg-slate-700 text-center font-bold text-lg text-pink-600 dark:text-pink-400 focus:outline-none" readonly>
                            <button onclick="adjustCycle(1)" class="w-10 h-10 rounded-full bg-pink-100 dark:bg-slate-700 text-pink-600 dark:text-pink-400 font-bold hover:bg-pink-200 dark:hover:bg-slate-600 transition">+</button>
                        </div>
                        <p class="text-xs text-gray-400 mt-2 text-center">*Normalnya antara 21 - 35 hari</p>
                    </div>
                    
                    <button onclick="calculateCycle()" class="w-full bg-gradient-to-r from-rose-500 to-pink-500 text-white font-bold py-4 rounded-xl shadow-lg shadow-pink-200 dark:shadow-none hover:shadow-pink-300 active:scale-95 transition-all mt-4 text-lg flex items-center justify-center gap-2">
                        <span>üîç</span> Hitung Sekarang
                    </button>
                </div>
            </div>

            <!-- Result Box (Hidden by default) -->
            <div id="calc-result" class="hidden animate__animated animate__fadeInUp mb-8">
                <!-- Main Result -->
                <div class="bg-gradient-to-br from-indigo-500 to-purple-600 rounded-3xl p-6 text-white shadow-lg relative overflow-hidden mb-6">
                    <div class="relative z-10">
                        <p class="text-indigo-100 text-sm font-medium mb-1">Perkiraan Haid Berikutnya</p>
                        <h4 id="res-next-period" class="text-3xl font-bold mb-4">-- -- ----</h4>
                        
                        <div class="bg-white/10 rounded-xl p-4 backdrop-blur-sm border border-white/20">
                            <div class="flex items-center gap-3 mb-2">
                                <span class="text-xl">üå∏</span>
                                <span class="font-bold text-sm">Masa Subur (Ovulasi)</span>
                            </div>
                            <p id="res-fertile" class="text-sm opacity-90">-- s/d --</p>
                        </div>
                    </div>
                    <!-- Decoration -->
                    <div class="absolute -right-6 -top-6 w-32 h-32 bg-white/10 rounded-full blur-2xl"></div>
                </div>

                <!-- Intro Text -->
                <div class="mb-6 p-4 bg-yellow-50 dark:bg-yellow-900/30 rounded-2xl border border-yellow-100 dark:border-yellow-800 text-sm text-yellow-800 dark:text-yellow-200 leading-relaxed text-justify">
                    <strong>Penting Diketahui:</strong> Siklus menstruasi adalah proses bulanan alami yang diatur hormon, umumnya 21-35 hari. Melibatkan 4 fase utama dengan perubahan hormon (Estrogen & Progesteron) yang memengaruhi tubuh dan emosi.
                </div>

                <!-- TIMELINE -->
                <div class="bg-white dark:bg-slate-800 rounded-3xl p-6 shadow-sm border border-slate-100 dark:border-slate-700">
                    <h4 class="font-bold text-gray-800 dark:text-white mb-6 flex items-center gap-2">
                        <span class="bg-rose-100 dark:bg-rose-900 p-1.5 rounded-lg text-rose-500 dark:text-rose-300">üìä</span>
                        Perjalanan Siklusmu
                    </h4>
                    
                    <div class="pl-2">
                        <!-- Phase 1 -->
                        <div class="timeline-item">
                            <div class="timeline-dot bg-red-500"></div>
                            <h5 class="font-bold text-red-500 text-lg">Fase Menstruasi</h5>
                            <span id="date-phase-1" class="text-xs font-bold bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-300 px-2 py-1 rounded-md mb-2 inline-block">Tanggal: ...</span>
                            <div class="bg-red-50 dark:bg-slate-700 rounded-xl p-4 text-sm text-gray-700 dark:text-gray-300 leading-relaxed">
                                <p class="mb-2"><strong>Hari 1-7:</strong> Dimulai saat hari pertama haid. Lapisan dinding rahim (endometrium) yang menebal meluruh keluar bersama darah dan jaringan.</p>
                            </div>
                        </div>

                        <!-- Phase 2 -->
                        <div class="timeline-item">
                            <div class="timeline-dot bg-blue-500"></div>
                            <h5 class="font-bold text-blue-500 text-lg">Fase Folikuler</h5>
                            <span id="date-phase-2" class="text-xs font-bold bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-300 px-2 py-1 rounded-md mb-2 inline-block">Tanggal: ...</span>
                            <div class="bg-blue-50 dark:bg-slate-700 rounded-xl p-4 text-sm text-gray-700 dark:text-gray-300 leading-relaxed">
                                <p class="mb-2"><strong>Setelah menstruasi hingga ovulasi:</strong> Hipotalamus merangsang ovarium membentuk folikel. Hormon estrogen mulai naik, menyebabkan dinding rahim menebal kembali (persiapan).</p>
                            </div>
                        </div>

                        <!-- Phase 3 -->
                        <div class="timeline-item">
                            <div class="timeline-dot bg-pink-500"></div>
                            <h5 class="font-bold text-pink-500 text-lg">Fase Ovulasi (Subur)</h5>
                            <span id="date-phase-3" class="text-xs font-bold bg-pink-50 dark:bg-pink-900/30 text-pink-600 dark:text-pink-300 px-2 py-1 rounded-md mb-2 inline-block">Tanggal: ...</span>
                            <div class="bg-pink-50 dark:bg-slate-700 rounded-xl p-4 text-sm text-gray-700 dark:text-gray-300 leading-relaxed">
                                <p class="mb-2"><strong>~2 Minggu sebelum haid berikutnya:</strong> Folikel pecah, melepaskan sel telur matang ke tuba falopi. Ini adalah puncak masa subur.</p>
                            </div>
                        </div>

                        <!-- Phase 4 -->
                        <div class="timeline-item">
                            <div class="timeline-dot bg-purple-500"></div>
                            <h5 class="font-bold text-purple-500 text-lg">Fase Luteal</h5>
                            <span id="date-phase-4" class="text-xs font-bold bg-purple-50 dark:bg-purple-900/30 text-purple-600 dark:text-purple-300 px-2 py-1 rounded-md mb-2 inline-block">Tanggal: ...</span>
                            <div class="bg-purple-50 dark:bg-slate-700 rounded-xl p-4 text-sm text-gray-700 dark:text-gray-300 leading-relaxed">
                                <p class="mb-2"><strong>Setelah ovulasi hingga haid:</strong> Korpus luteum memproduksi Progesteron agar rahim siap. Jika tidak ada pembuahan, hormon turun dan siklus berulang (Haid).</p>
                                <p class="text-xs text-purple-700 dark:text-purple-300 mt-2 bg-purple-100 dark:bg-purple-900/50 p-2 rounded">
                                    <em>Note: Fase ini sering memicu gejala PMS (Premenstrual Syndrome) karena perubahan hormon.</em>
                                </p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="mt-4 text-center">
                    <p class="text-xs text-gray-400 italic">Data di atas adalah estimasi medis umum. Setiap tubuh perempuan unik dan bisa berbeda.</p>
                </div>

            </div>

            <!-- Video Edukasi Section -->
            <div class="mt-8">
                <h4 class="text-xl font-bold text-gray-800 dark:text-white mb-4 text-center flex items-center justify-center gap-2">
                    <span class="bg-rose-100 dark:bg-rose-900 p-1.5 rounded-lg text-rose-500 dark:text-rose-300 text-base">üì∫</span>
                    Tontonan Edukatif
                </h4>
                <div class="space-y-6">
                    <!-- Video 1 -->
                    <div class="bg-white dark:bg-slate-800 rounded-2xl overflow-hidden shadow-md border border-slate-100 dark:border-slate-700">
                        <div class="relative pb-[56.25%] h-0">
                            <iframe class="absolute top-0 left-0 w-full h-full" src="https://www.youtube.com/embed/dkoG5BJ6Ld0" title="Sang Tamu Bulanan (Siklus Menstruasi)" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
                        </div>
                        <div class="p-4">
                            <h5 class="font-bold text-gray-800 dark:text-white mb-1 text-sm">Sang Tamu Bulanan (Siklus Menstruasi)</h5>
                            <p class="text-xs text-rose-500 dark:text-rose-400 font-medium">Sumber: Neuron Media</p>
                        </div>
                    </div>

                    <!-- Video 2 -->
                    <div class="bg-white dark:bg-slate-800 rounded-2xl overflow-hidden shadow-md border border-slate-100 dark:border-slate-700">
                        <div class="relative pb-[56.25%] h-0">
                            <iframe class="absolute top-0 left-0 w-full h-full" src="https://www.youtube.com/embed/EetIBkWcQZw" title="Cara Menjaga Organ Reproduksi Wanita" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
                        </div>
                        <div class="p-4">
                            <h5 class="font-bold text-gray-800 dark:text-white mb-1 text-sm">Cara Menjaga Organ Reproduksi Wanita</h5>
                            <p class="text-xs text-rose-500 dark:text-rose-400 font-medium">Sumber: Sehat Pedia</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- SECTION 5: BAHAYA MATERIAL PEMBALUT -->
        <div id="section-5" class="content-section">
            <h3 class="text-2xl font-bold text-gray-800 dark:text-white mb-6 px-2">Analisis & Edukasi Material Pembalut</h3>
            
            <!-- New Block for Pembalut Info -->
            <div class="materi-card border-t-8 border-amber-500 shadow-lg p-0 overflow-hidden">
                <!-- Image -->
                <div class="w-full bg-amber-50 dark:bg-amber-900/20 relative">
                    <img src="Pembalut.png" alt="Infografis Bahaya Pembalut" class="w-full h-auto object-cover block" onerror="this.parentElement.innerHTML='<div class=\'flex flex-col items-center justify-center h-48 text-amber-500 bg-amber-50 p-4 text-center\'><span class=\'text-2xl mb-2\'>üñºÔ∏è</span><strong>File Tidak Ditemukan</strong><span class=\'text-xs\'>Pastikan file <code>Pembalut.png</code> ada di folder yang sama</span></div>'">
                </div>
                
                <!-- Content -->
                <div class="p-6 space-y-8">
                    <!-- Part 1 -->
                    <div>
                        <h4 class="font-bold text-amber-700 dark:text-amber-300 text-xl mb-3">1. Kandungan Bahan Kimia Berbahaya</h4>
                        <p class="text-sm text-gray-600 dark:text-gray-300 mb-4 text-justify leading-relaxed">
                            Pembalut sering kali mengandung berbagai zat kimia yang digunakan dalam proses produksi untuk meningkatkan daya serap atau estetika, namun berisiko bagi kesehatan:
                        </p>
                        <ul class="space-y-3 text-sm text-gray-700 dark:text-gray-300 text-justify">
                            <li class="flex gap-3 items-start">
                                <span class="font-bold text-amber-600 bg-amber-100 rounded px-1.5 h-6 flex items-center shrink-0">1</span>
                                <span><strong>Dioxin, Chlorine, & Acetone:</strong> Zat-zat ini biasanya digunakan sebagai pemutih kapas (bleaching) agar pembalut terlihat bersih dan putih.</span>
                            </li>
                            <li class="flex gap-3 items-start">
                                <span class="font-bold text-amber-600 bg-amber-100 rounded px-1.5 h-6 flex items-center shrink-0">2</span>
                                <span><strong>Phthalates:</strong> Digunakan untuk menghaluskan material pembalut agar terasa lebih lembut di kulit.</span>
                            </li>
                            <li class="flex gap-3 items-start">
                                <span class="font-bold text-amber-600 bg-amber-100 rounded px-1.5 h-6 flex items-center shrink-0">3</span>
                                <span><strong>Pesticide & Herbicide:</strong> Sering kali ditemukan sebagai residu pada kapas yang menjadi bahan dasar pembalut.</span>
                            </li>
                            <li class="flex gap-3 items-start">
                                <span class="font-bold text-amber-600 bg-amber-100 rounded px-1.5 h-6 flex items-center shrink-0">4</span>
                                <span><strong>Styrene & Chloromethane:</strong> Bahan kimia yang sebenarnya juga ditemukan pada produk industri non-tekstil seperti ban mobil.</span>
                            </li>
                        </ul>
                    </div>
                    
                    <!-- Part 2 -->
                    <div>
                        <h4 class="font-bold text-rose-700 dark:text-rose-300 text-xl mb-3">2. Dampak Kesehatan</h4>
                        <p class="text-sm text-gray-600 dark:text-gray-300 mb-4 text-justify leading-relaxed">
                            Paparan bahan kimia tersebut pada area sensitif dalam jangka panjang dapat menimbulkan berbagai masalah:
                        </p>
                        <ul class="space-y-2 text-sm text-gray-700 dark:text-gray-300 pl-2">
                            <li class="flex items-center gap-2">
                                <span class="text-rose-500">‚Ä¢</span>
                                <span>Iritasi kulit dan gatal-gatal.</span>
                            </li>
                            <li class="flex items-center gap-2">
                                <span class="text-rose-500">‚Ä¢</span>
                                <span>Gangguan hormon akibat zat seperti phthalates atau dioxin.</span>
                            </li>
                            <li class="flex items-center gap-2">
                                <span class="text-rose-500">‚Ä¢</span>
                                <span>Risiko infeksi karena terganggunya keseimbangan pH alami area intim.</span>
                            </li>
                        </ul>
                    </div>

                    <!-- Part 3 -->
                    <div>
                        <h4 class="font-bold text-emerald-700 dark:text-emerald-300 text-xl mb-3">3. Dampak Buruk bagi Lingkungan</h4>
                        <p class="text-sm text-gray-600 dark:text-gray-300 mb-4 text-justify leading-relaxed">
                            Selain masalah kesehatan, pembalut sekali pakai memberikan beban besar bagi alam:
                        </p>
                        <ul class="space-y-3 text-sm text-gray-700 dark:text-gray-300 text-justify pl-2">
                            <li class="flex gap-3 items-start">
                                <span class="text-emerald-500 mt-1">‚Ä¢</span>
                                <span><strong>Sulit Terurai:</strong> Satu buah pembalut membutuhkan waktu sekitar 500 hingga 800 tahun untuk dapat terurai secara alami di alam.</span>
                            </li>
                            <li class="flex gap-3 items-start">
                                <span class="text-emerald-500 mt-1">‚Ä¢</span>
                                <span><strong>Komposisi Plastik:</strong> Bahan penyusun satu pembalut rata-rata setara dengan 4 kantung plastik, yang menjadikannya penyumbang limbah plastik yang signifikan.</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Block Baru 1: Perbedaan Darah -->
            <div class="materi-card mt-8">
                <h4 class="font-bold text-gray-800 dark:text-white text-xl mb-6 text-center">Cara Membedakan Darah Haid VS Darah Istihadhah</h4>
                
                <div class="overflow-x-auto">
                    <table class="w-full text-sm text-left border-collapse rounded-xl overflow-hidden shadow-sm border border-pink-200 dark:border-pink-900">
                        <thead class="text-xs text-white uppercase">
                            <tr>
                                <th scope="col" class="px-4 md:px-6 py-4 text-center w-1/4 bg-pink-400 dark:bg-pink-800">Pembeda</th>
                                <th scope="col" class="px-4 md:px-6 py-4 text-center bg-pink-500 dark:bg-pink-700 w-1/3">Darah Haid</th>
                                <th scope="col" class="px-4 md:px-6 py-4 text-center bg-pink-300 dark:bg-pink-600 w-1/3">Darah Istihadhah</th>
                            </tr>
                        </thead>
                        <tbody class="bg-pink-50 dark:bg-slate-800 divide-y divide-pink-100 dark:divide-pink-900/30">
                            <!-- Baris 1: Warna -->
                            <tr class="hover:bg-pink-100 dark:hover:bg-pink-900/20 transition">
                                <th scope="row" class="px-4 md:px-6 py-4 font-bold text-pink-800 dark:text-pink-200 bg-pink-200/50 dark:bg-pink-900/40">
                                    Warna
                                </th>
                                <td class="px-4 md:px-6 py-4 text-pink-900 dark:text-pink-100 bg-white/50 dark:bg-transparent">
                                    Hitam atau Merah Gelap (Kehitaman)
                                </td>
                                <td class="px-4 md:px-6 py-4 text-pink-900 dark:text-pink-100 bg-white/30 dark:bg-transparent">
                                    Merah Segar (Seperti darah luka)
                                </td>
                            </tr>
                            <!-- Baris 2: Kekentalan -->
                            <tr class="hover:bg-pink-100 dark:hover:bg-pink-900/20 transition">
                                <th scope="row" class="px-4 md:px-6 py-4 font-bold text-pink-800 dark:text-pink-200 bg-pink-200/50 dark:bg-pink-900/40">
                                    Kekentalan
                                </th>
                                <td class="px-4 md:px-6 py-4 text-pink-900 dark:text-pink-100 bg-white/50 dark:bg-transparent">
                                    Kental dan Pekat
                                </td>
                                <td class="px-4 md:px-6 py-4 text-pink-900 dark:text-pink-100 bg-white/30 dark:bg-transparent">
                                    Encer dan Cair
                                </td>
                            </tr>
                            <!-- Baris 3: Aroma -->
                            <tr class="hover:bg-pink-100 dark:hover:bg-pink-900/20 transition">
                                <th scope="row" class="px-4 md:px-6 py-4 font-bold text-pink-800 dark:text-pink-200 bg-pink-200/50 dark:bg-pink-900/40">
                                    Aroma
                                </th>
                                <td class="px-4 md:px-6 py-4 text-pink-900 dark:text-pink-100 bg-white/50 dark:bg-transparent">
                                    Berbau anyir yang khas & menyengat
                                </td>
                                <td class="px-4 md:px-6 py-4 text-pink-900 dark:text-pink-100 bg-white/30 dark:bg-transparent">
                                    Tidak berbau (seperti darah biasa)
                                </td>
                            </tr>
                            <!-- Baris 4: Sifat -->
                            <tr class="hover:bg-pink-100 dark:hover:bg-pink-900/20 transition">
                                <th scope="row" class="px-4 md:px-6 py-4 font-bold text-pink-800 dark:text-pink-200 bg-pink-200/50 dark:bg-pink-900/40">
                                    Sifat
                                </th>
                                <td class="px-4 md:px-6 py-4 text-pink-900 dark:text-pink-100 bg-white/50 dark:bg-transparent">
                                    Tidak membeku (karena jaringan luruh)
                                </td>
                                <td class="px-4 md:px-6 py-4 text-pink-900 dark:text-pink-100 bg-white/30 dark:bg-transparent">
                                    Dapat membeku jika didiamkan
                                </td>
                            </tr>
                             <!-- Baris 5: Suhu -->
                             <tr class="hover:bg-pink-100 dark:hover:bg-pink-900/20 transition">
                                <th scope="row" class="px-4 md:px-6 py-4 font-bold text-pink-800 dark:text-pink-200 bg-pink-200/50 dark:bg-pink-900/40">
                                    Suhu
                                </th>
                                <td class="px-4 md:px-6 py-4 text-pink-900 dark:text-pink-100 bg-white/50 dark:bg-transparent">
                                    Terasa panas/hangat saat keluar
                                </td>
                                <td class="px-4 md:px-6 py-4 text-pink-900 dark:text-pink-100 bg-white/30 dark:bg-transparent">
                                    Terasa biasa (dingin)
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Block Baru 2: Usai Haid (Design Baru: Pastel Clean) -->
            <div class="materi-card mt-8 p-0 overflow-hidden bg-[#FFF0F5] dark:bg-[#3d2b30] border-none shadow-md">
                <!-- Padding atas dikurangi jadi py-6 -->
                <div class="max-w-[650px] mx-auto py-6 px-2 sm:px-10 flex flex-col items-center">
                    
                    <!-- 1. Judul Utama (pt-4 dihapus) -->
                    <h2 class="font-['Caveat'] text-5xl md:text-6xl text-[#1a472a] dark:text-[#a3c9a8] mb-8 leading-tight text-center">
                        Haid Sudah Selesai?
                    </h2>

                    <!-- 2 & 3. Layout Split: Kiri (Judul) & Kanan (List) -->
                    <!-- Margin bawah dikurangi jadi mb-3 agar teks di bawahnya lebih dekat -->
                    <div class="flex flex-row items-center justify-center gap-6 md:gap-12 mb-3 w-fit mx-auto px-2">
                        
                        <!-- Sisi Kiri: Judul Tanda Suci -->
                        <div class="flex flex-col items-center justify-center text-center shrink-0">
                            <span class="text-[#d97706] dark:text-[#fbbf24] font-bold text-xl md:text-4xl leading-tight">
                                Tanda Suci
                            </span>
                            <span class="text-[#1a472a] dark:text-[#a3c9a8] font-bold text-lg md:text-3xl leading-tight">
                                Dari Haid
                            </span>
                        </div>

                        <!-- Garis Pemisah Vertical (Tetap hidden di mobile biar rapi, muncul di desktop) -->
                        <div class="hidden md:block w-px h-16 bg-[#1a472a]/20 dark:bg-white/20"></div>

                        <!-- Sisi Kanan: Daftar Point -->
                        <ul class="text-[#1a472a] dark:text-[#a3c9a8] font-medium text-sm md:text-lg space-y-2 list-disc pl-4">
                            <li class="pl-1">Jufuf (Kering)</li>
                            <li class="pl-1">Qoshotul Baidho (cairan putih/bening)</li>
                        </ul>
                    </div>

                    <!-- 4. Teks Penjelasan Kecil -->
                    <p class="text-gray-500 dark:text-gray-400 text-xs md:text-sm text-center max-w-sm mb-12 leading-relaxed px-4">
                        Jika sudah muncul salah satu dari keduanya, maka telah dianggap suci haid.
                    </p>

                    <!-- 5 & 6. Layout Split: Cek Waktu (Kiri) & List (Kanan) -->
                    <!-- UBAH: Pakai flex-row di semua ukuran layar -->
                    <div class="flex flex-row items-center justify-center gap-3 md:gap-12 mb-16 w-full px-2">
                        
                        <!-- Sisi Kiri: Layout Custom -->
                        <div class="flex gap-0 shrink-0 items-start">
                            <!-- Kolom: Cek pada + 3 (Rata Kiri) -->
                            <div class="flex flex-col items-start">
                                <!-- Cek pada: Diturunkan mendekati angka 3 -->
                                <span class="text-[#1a472a] dark:text-[#a3c9a8] text-xs md:text-lg font-bold uppercase tracking-wider leading-tight mb-[-10px] md:mb-[-15px] z-10">
                                    Cek pada
                                </span>
                                <!-- Angka 3: Ukuran disesuaikan untuk mobile (text-6xl) dan desktop (text-8xl) -->
                                <span class="font-['Caveat'] text-6xl md:text-8xl text-[#d97706] dark:text-[#fbbf24] leading-none -ml-1">
                                    3
                                </span>
                            </div>
                            
                            <!-- Waktu! (Ditarik mundur, ukuran disesuaikan mobile/desktop) -->
                            <span class="text-[#1a472a] dark:text-[#a3c9a8] font-bold uppercase tracking-wider leading-tight text-lg md:text-3xl mt-7 md:mt-9 -ml-6 md:-ml-8 text-left">
                                Waktu!
                            </span>
                        </div>

                        <!-- Garis Pemisah Vertical -->
                        <div class="hidden md:block w-px h-24 bg-[#1a472a]/20 dark:bg-white/20"></div>

                        <!-- Sisi Kanan: Daftar Waktu -->
                        <ol class="text-[#1a472a] dark:text-[#a3c9a8] font-medium text-sm md:text-lg space-y-2 md:space-y-3 list-decimal pl-4 md:pl-0">
                            <li class="pl-2">Setiap akhir waktu sholat</li>
                            <li class="pl-2">Hendak tidur malam</li>
                            <li class="pl-2">Menjelang kebiasaan suci</li>
                        </ol>
                    </div>

                    <!-- 7. Bagian Penting -->
                    <div class="w-full text-left self-start border-t-2 border-dashed border-[#1a472a]/20 dark:border-white/10 pt-10 px-4">
                        <h4 class="text-[#d97706] dark:text-[#fbbf24] font-bold text-lg md:text-xl mb-6 tracking-wide uppercase">
                            PENTING! CARA NGECEK HAID:
                        </h4>
                        <ul class="space-y-4 text-[#1a472a] dark:text-[#a3c9a8] text-sm md:text-[0.95rem] leading-relaxed">
                            <li class="flex items-start gap-3 md:gap-4">
                                <span class="mt-1.5 md:mt-2 w-1.5 h-1.5 rounded-full bg-[#1a472a] dark:bg-[#a3c9a8] shrink-0"></span>
                                <span>Tempelkan <strong>kapas atau tisu</strong> ke farji (kemaluan) bagian luar, sambil <strong>jongkok</strong>.</span>
                            </li>
                            <li class="flex items-start gap-3 md:gap-4">
                                <span class="mt-1.5 md:mt-2 w-1.5 h-1.5 rounded-full bg-[#1a472a] dark:bg-[#a3c9a8] shrink-0"></span>
                                <span><strong>Harus melihat!</strong> Tidak bisa pakai perasaan.</span>
                            </li>
                            <li class="flex items-start gap-3 md:gap-4">
                                <span class="mt-1.5 md:mt-2 w-1.5 h-1.5 rounded-full bg-[#1a472a] dark:bg-[#a3c9a8] shrink-0"></span>
                                <span><strong>Tidak cukup</strong> hanya melihat di celana dalam.</span>
                            </li>
                            <li class="flex items-start gap-3 md:gap-4">
                                <span class="mt-1.5 md:mt-2 w-1.5 h-1.5 rounded-full bg-[#1a472a] dark:bg-[#a3c9a8] shrink-0"></span>
                                <span>Bila ada <strong>bercak</strong> (walau hanya keruh) berarti <strong>belum bersih/suci</strong>. Meskipun cairan itu tidak mengalir ke kemaluan bagian luar.</span>
                            </li>
                        </ul>
                    </div>

                </div>
            </div>

            <!-- Block Baru 3: Adab Thaharah Setelah Haid -->
            <div class="materi-card mt-6">
                <h4 class="font-bold text-gray-800 dark:text-white text-xl mb-6 text-center">Adab Thaharah Setelah Haid</h4>
                <div class="w-full flex justify-center bg-pink-50 dark:bg-slate-700/50 rounded-xl p-4">
                    <img src="Adab_Thaharah_Setelah_Haid.png" alt="Adab Thaharah Setelah Haid" class="w-full h-auto max-w-[720px] rounded-lg shadow-sm block" onerror="this.parentElement.innerHTML='<div class=\'flex flex-col items-center justify-center h-48 text-pink-500 bg-pink-50 dark:bg-slate-800 p-4 text-center w-full\'><span class=\'text-2xl mb-2\'>üñºÔ∏è</span><strong>File Tidak Ditemukan</strong><span class=\'text-xs\'>Pastikan file <code>Adab_Thaharah_Setelah_Haid.png</code> ada</span></div>'">
                </div>
            </div>

            <!-- Block Baru 4: Hal yang Diharamkan (Layout 2 Kolom dengan Block Transparan) -->
            <!-- Updated Color Variation -->
            <div class="rounded-[2rem] p-8 mt-8 shadow-lg transition-colors duration-300 bg-[#FCE7F3] dark:bg-[#9D174D]">
                <h4 class="font-bold text-rose-900 dark:text-pink-100 text-2xl mb-8 text-center leading-tight">10 Perkara yang Diharamkan bagi Wanita Haid</h4>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Kolom Kiri (1-5) -->
                    <div class="space-y-4">
                        <!-- Item 1 -->
                        <div class="bg-white/40 dark:bg-black/20 p-4 rounded-2xl flex gap-4 items-start shadow-sm backdrop-blur-sm hover:bg-white/50 transition">
                            <span class="bg-white/60 dark:bg-white/10 w-8 h-8 rounded-full flex items-center justify-center font-bold text-rose-800 dark:text-pink-200 text-sm shrink-0 border border-white/30">1</span>
                            <span class="pt-1.5 text-rose-900 dark:text-pink-100 text-sm font-medium"><strong>Shalat</strong> (Baik Fardhu maupun Sunnah).</span>
                        </div>
                        <!-- Item 2 -->
                        <div class="bg-white/40 dark:bg-black/20 p-4 rounded-2xl flex gap-4 items-start shadow-sm backdrop-blur-sm hover:bg-white/50 transition">
                            <span class="bg-white/60 dark:bg-white/10 w-8 h-8 rounded-full flex items-center justify-center font-bold text-rose-800 dark:text-pink-200 text-sm shrink-0 border border-white/30">2</span>
                            <span class="pt-1.5 text-rose-900 dark:text-pink-100 text-sm font-medium"><strong>Thawaf</strong> (Mengelilingi Ka'bah).</span>
                        </div>
                        <!-- Item 3 -->
                         <div class="bg-white/40 dark:bg-black/20 p-4 rounded-2xl flex gap-4 items-start shadow-sm backdrop-blur-sm hover:bg-white/50 transition">
                            <span class="bg-white/60 dark:bg-white/10 w-8 h-8 rounded-full flex items-center justify-center font-bold text-rose-800 dark:text-pink-200 text-sm shrink-0 border border-white/30">3</span>
                            <span class="pt-1.5 text-rose-900 dark:text-pink-100 text-sm font-medium"><strong>Menyentuh Mushaf</strong> (Al-Qur'an).</span>
                        </div>
                        <!-- Item 4 -->
                         <div class="bg-white/40 dark:bg-black/20 p-4 rounded-2xl flex gap-4 items-start shadow-sm backdrop-blur-sm hover:bg-white/50 transition">
                            <span class="bg-white/60 dark:bg-white/10 w-8 h-8 rounded-full flex items-center justify-center font-bold text-rose-800 dark:text-pink-200 text-sm shrink-0 border border-white/30">4</span>
                            <span class="pt-1.5 text-rose-900 dark:text-pink-100 text-sm font-medium"><strong>Membawa Mushaf</strong> (Kecuali dalam keadaan darurat untuk menjaganya).</span>
                        </div>
                        <!-- Item 5 -->
                         <div class="bg-white/40 dark:bg-black/20 p-4 rounded-2xl flex gap-4 items-start shadow-sm backdrop-blur-sm hover:bg-white/50 transition">
                            <span class="bg-white/60 dark:bg-white/10 w-8 h-8 rounded-full flex items-center justify-center font-bold text-rose-800 dark:text-pink-200 text-sm shrink-0 border border-white/30">5</span>
                            <span class="pt-1.5 text-rose-900 dark:text-pink-100 text-sm font-medium"><strong>Membaca Al-Qur'an</strong> (Dengan niat membaca Al-Qur'an, bukan dzikir/doa).</span>
                        </div>
                    </div>

                    <!-- Kolom Kanan (6-10) -->
                    <div class="space-y-4">
                        <!-- Item 6 -->
                         <div class="bg-white/40 dark:bg-black/20 p-4 rounded-2xl flex gap-4 items-start shadow-sm backdrop-blur-sm hover:bg-white/50 transition">
                            <span class="bg-white/60 dark:bg-white/10 w-8 h-8 rounded-full flex items-center justify-center font-bold text-rose-800 dark:text-pink-200 text-sm shrink-0 border border-white/30">6</span>
                            <span class="pt-1.5 text-rose-900 dark:text-pink-100 text-sm font-medium"><strong>Puasa</strong> (Baik Wajib maupun Sunnah, wajib diqadha untuk puasa Ramadhan).</span>
                        </div>
                        <!-- Item 7 -->
                         <div class="bg-white/40 dark:bg-black/20 p-4 rounded-2xl flex gap-4 items-start shadow-sm backdrop-blur-sm hover:bg-white/50 transition">
                            <span class="bg-white/60 dark:bg-white/10 w-8 h-8 rounded-full flex items-center justify-center font-bold text-rose-800 dark:text-pink-200 text-sm shrink-0 border border-white/30">7</span>
                            <span class="pt-1.5 text-rose-900 dark:text-pink-100 text-sm font-medium"><strong>I'tikaf</strong> (Berdiam diri di dalam Masjid).</span>
                        </div>
                        <!-- Item 8 -->
                         <div class="bg-white/40 dark:bg-black/20 p-4 rounded-2xl flex gap-4 items-start shadow-sm backdrop-blur-sm hover:bg-white/50 transition">
                            <span class="bg-white/60 dark:bg-white/10 w-8 h-8 rounded-full flex items-center justify-center font-bold text-rose-800 dark:text-pink-200 text-sm shrink-0 border border-white/30">8</span>
                            <span class="pt-1.5 text-rose-900 dark:text-pink-100 text-sm font-medium"><strong>Lewat di dalam Masjid</strong> (Jika khawatir darah menetes mengotori masjid).</span>
                        </div>
                        <!-- Item 9 -->
                         <div class="bg-white/40 dark:bg-black/20 p-4 rounded-2xl flex gap-4 items-start shadow-sm backdrop-blur-sm hover:bg-white/50 transition">
                            <span class="bg-white/60 dark:bg-white/10 w-8 h-8 rounded-full flex items-center justify-center font-bold text-rose-800 dark:text-pink-200 text-sm shrink-0 border border-white/30">9</span>
                            <span class="pt-1.5 text-rose-900 dark:text-pink-100 text-sm font-medium"><strong>Istimta'</strong> (Bersenang-senang di antara pusar dan lutut).</span>
                        </div>
                        <!-- Item 10 -->
                         <div class="bg-white/40 dark:bg-black/20 p-4 rounded-2xl flex gap-4 items-start shadow-sm backdrop-blur-sm hover:bg-white/50 transition">
                            <span class="bg-white/60 dark:bg-white/10 w-8 h-8 rounded-full flex items-center justify-center font-bold text-rose-800 dark:text-pink-200 text-sm shrink-0 border border-white/30">10</span>
                            <span class="pt-1.5 text-rose-900 dark:text-pink-100 text-sm font-medium"><strong>Jima'</strong> (Hubungan suami istri).</span>
                        </div>
                    </div>
                </div>

                <div class="mt-8 pt-4 border-t border-rose-900/10 dark:border-white/20 text-xs text-rose-900/80 dark:text-pink-100/80 italic text-center">
                    Sumber: Kitab Safinatun Najah & Kasyifatus Saja
                </div>
            </div>

            <!-- Block Baru 5: Apa Itu Darah Istihadhah -->
            <div class="materi-card mt-6">
                <h4 class="font-bold text-gray-800 dark:text-white text-xl mb-6 text-center">Apa Itu Darah Istihadhah?</h4>
                <div class="w-full flex justify-center bg-pink-50 dark:bg-slate-700/50 rounded-xl p-4">
                    <img src="Apa_Darah_Istihadhah.png" alt="Apa Itu Darah Istihadhah?" class="w-full h-auto max-w-[720px] rounded-lg shadow-sm block" onerror="this.parentElement.innerHTML='<div class=\'flex flex-col items-center justify-center h-48 text-pink-500 bg-pink-50 dark:bg-slate-800 p-4 text-center w-full\'><span class=\'text-2xl mb-2\'>üñºÔ∏è</span><strong>File Tidak Ditemukan</strong><span class=\'text-xs\'>Pastikan file <code>Apa_Darah_Istihadhah.png</code> ada</span></div>'">
                </div>
            </div>

            <!-- Block Baru 6: Penjelasan Adab Istihadhah (Warna Khusus) -->
            <div class="rounded-[2rem] p-8 mt-8 shadow-lg transition-colors duration-300 bg-[#F8D8DF] dark:bg-[#B84860]">
                <h3 class="text-2xl font-bold text-rose-900 dark:text-rose-100 mb-6 text-center leading-tight">Adab Thaharah dan Sholat bagi Perempuan Istihadhah</h3>
                
                <p class="text-rose-900 dark:text-rose-100 mb-6 text-justify font-medium text-sm leading-relaxed">
                    Sayyid Abdurrahman bin Abdullah bin Abdul Qadir as-Saqaf mengatakan ada lima hal yang harus dilakukan perempuan yang istihadhah ketika hendak mengerjakan shalat:
                </p>

                <ul class="space-y-4 text-rose-900 dark:text-rose-100 text-justify list-none text-sm">
                    <li class="flex gap-4">
                        <span class="bg-white/40 dark:bg-black/20 w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm shrink-0 shadow-sm border border-white/20">1</span>
                        <span class="pt-1.5">Membasuh kemaluannya sebelum mengerjakan shalat.</span>
                    </li>
                    <li class="flex gap-4">
                        <span class="bg-white/40 dark:bg-black/20 w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm shrink-0 shadow-sm border border-white/20">2</span>
                        <span class="pt-1.5">
                            Menyumbat atau menutup kemaluannya dengan kapas atau sesamanya ketika hendak shalat. Hanya saja, keharusan yang kedua ini apabila memenuhi tiga syarat berikut:
                            <br><br>
                            (1) Tidak menimbulkan rasa sakit yang sangat parah;<br>
                            (2) Tidak dalam keadaan puasa (fardhu); dan<br>
                            (3) Penyumbatan dilakukan jika dibutuhkan saja, seperti darah yang keluar saat hendak melaksanakan shalat.
                        </span>
                    </li>
                    <li class="flex gap-4">
                         <span class="bg-white/40 dark:bg-black/20 w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm shrink-0 shadow-sm border border-white/20">3</span>
                        <span class="pt-1.5">Membalut kemaluannya.</span>
                    </li>
                    <li class="flex gap-4">
                         <span class="bg-white/40 dark:bg-black/20 w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm shrink-0 shadow-sm border border-white/20">4</span>
                        <span class="pt-1.5">Wudhu setelah masuk waktu shalat dan harus wudhu lagi setiap akan melaksanakan shalat.</span>
                    </li>
                    <li class="flex gap-4">
                         <span class="bg-white/40 dark:bg-black/20 w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm shrink-0 shadow-sm border border-white/20">5</span>
                        <span class="pt-1.5">Harus cepat-cepat tanpa jeda dengan waktu yang panjang antara kewajiban pertama hingga kelima (sebelum melaksanakan shalat).</span>
                    </li>
                </ul>

                <div class="mt-8 pt-4 border-t border-rose-900/10 dark:border-white/20 text-xs text-rose-900/80 dark:text-rose-100/80 italic text-center">
                    Sumber: Kitab al-Ibanah wal Ifadhah fi Ahkamil Haidh wan Nifas wal Istihadhah, cetakan Maktabah Kanzul Hikmah, halaman 55-56
                </div>
            </div>

        </div>

        <!-- SECTION 6: CELANA DALAM & HIGIENE -->
        <div id="section-6" class="content-section">
            <h3 class="text-2xl font-bold text-gray-800 dark:text-white mb-8 text-center">Panduan Memilih Celana Dalam</h3>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                
                <!-- Card 1: Dianjurkan -->
                <div class="materi-card border-t-8 border-green-500 shadow-lg p-0 overflow-hidden flex flex-col">
                    <!-- Image Area -->
                    <div class="w-full bg-green-50 dark:bg-green-900/20 relative">
                        <img src="CD_Senang.png" alt="Ilustrasi CD Dianjurkan" class="w-full h-auto object-cover block" onerror="this.parentElement.innerHTML='<div class=\'flex flex-col items-center justify-center h-48 text-green-500 bg-green-50 p-4 text-center\'><span class=\'text-2xl mb-2\'>üñºÔ∏è</span><strong>File Tidak Ditemukan</strong><span class=\'text-xs\'>Pastikan file <code>CD_Senang.png</code> ada di folder yang sama</span></div>'">
                    </div>
                    
                    <!-- Content Area -->
                    <div class="p-6">
                        <h4 class="font-bold text-green-700 dark:text-green-300 text-xl mb-4 flex items-center gap-2">
                            <span class="bg-green-100 dark:bg-green-900 p-1 rounded-full">‚úÖ</span> Bahan CD yang Dianjurkan
                        </h4>
                        <ul class="space-y-4 text-sm text-gray-700 dark:text-gray-300 text-justify">
                            <li class="flex gap-3 items-start">
                                <span class="font-bold text-green-600 bg-green-100 rounded px-1.5 h-6 flex items-center">1</span>
                                <span><strong>Katun 100%:</strong> Bahan ini paling direkomendasikan karena sifatnya yang sangat baik dalam menyerap keringat dan menjaga ventilasi udara tetap lancar.</span>
                            </li>
                            <li class="flex gap-3 items-start">
                                <span class="font-bold text-green-600 bg-green-100 rounded px-1.5 h-6 flex items-center">2</span>
                                <span><strong>Campuran Katun dan Serat Bambu:</strong> Kombinasi ini dianjurkan karena memiliki sifat alami yang menyerap kelembapan dengan baik dan menjaga ventilasi tetap optimal.</span>
                            </li>
                            <li class="flex gap-3 items-start">
                                <span class="font-bold text-green-600 bg-green-100 rounded px-1.5 h-6 flex items-center">3</span>
                                <span><strong>Bahan Hypoallergenic:</strong> Pilihlah material yang bebas dari pewarna kimia berbahaya atau zat yang memicu alergi untuk menghindari risiko ruam dan dermatitis.</span>
                            </li>
                            <li class="flex gap-3 items-start">
                                <span class="font-bold text-green-600 bg-green-100 rounded px-1.5 h-6 flex items-center">4</span>
                                <span><strong>Karet dengan Elastisitas Pas:</strong> Pastikan menggunakan karet yang elastis namun tidak menekan kulit secara berlebihan guna menjaga sirkulasi udara dan mencegah lecet.</span>
                            </li>
                            <li class="flex gap-3 items-start">
                                <span class="font-bold text-green-600 bg-green-100 rounded px-1.5 h-6 flex items-center">5</span>
                                <span><strong>Jahitan Halus (Flat Seams):</strong> Dianjurkan memilih produk dengan penyelesaian jahitan yang rata dan halus agar tidak melukai kulit sensitif di area selangkangan dan pinggang.</span>
                            </li>
                        </ul>
                    </div>
                </div>

                <!-- Card 2: Tidak Dianjurkan -->
                <div class="materi-card border-t-8 border-red-500 shadow-lg p-0 overflow-hidden flex flex-col">
                    <!-- Image Area -->
                    <div class="w-full bg-red-50 dark:bg-red-900/20 relative">
                        <img src="CD_Sedih.png" alt="Ilustrasi CD Tidak Dianjurkan" class="w-full h-auto object-cover block" onerror="this.parentElement.innerHTML='<div class=\'flex flex-col items-center justify-center h-48 text-red-500 bg-red-50 p-4 text-center\'><span class=\'text-2xl mb-2\'>üñºÔ∏è</span><strong>File Tidak Ditemukan</strong><span class=\'text-xs\'>Pastikan file <code>CD_Sedih.png</code> ada di folder yang sama</span></div>'">
                    </div>

                    <!-- Content Area -->
                    <div class="p-6">
                        <h4 class="font-bold text-red-700 dark:text-red-300 text-xl mb-4 flex items-center gap-2">
                            <span class="bg-red-100 dark:bg-red-900 p-1 rounded-full">üö´</span> Bahan CD yang Tidak Dianjurkan
                        </h4>
                        <ul class="space-y-4 text-sm text-gray-700 dark:text-gray-300 text-justify">
                            <li class="flex gap-3 items-start">
                                <span class="font-bold text-red-600 bg-red-100 rounded px-1.5 h-6 flex items-center">1</span>
                                <span><strong>Bahan Non-Absorben:</strong> Hindari bahan seperti satin atau poliester murah karena tidak mampu menyerap kelembapan, yang dapat memicu pertumbuhan bakteri dan jamur.</span>
                            </li>
                            <li class="flex gap-3 items-start">
                                <span class="font-bold text-red-600 bg-red-100 rounded px-1.5 h-6 flex items-center">2</span>
                                <span><strong>Karet yang Terlalu Ketat:</strong> Hindari celana dalam dengan karet atau bahan elastis yang terlalu menekan, karena dapat menghambat sirkulasi udara dan menyebabkan lecet pada kulit.</span>
                            </li>
                            <li class="flex gap-3 items-start">
                                <span class="font-bold text-red-600 bg-red-100 rounded px-1.5 h-6 flex items-center">3</span>
                                <span><strong>Bahan Sintetis Non-Hypoallergenic:</strong> Hindari material yang mengandung pewarna atau bahan kimia keras yang dapat memicu reaksi alergi, ruam, atau dermatitis.</span>
                            </li>
                            <li class="flex gap-3 items-start">
                                <span class="font-bold text-red-600 bg-red-100 rounded px-1.5 h-6 flex items-center">4</span>
                                <span><strong>Jahitan yang Kasar:</strong> Hindari celana dalam dengan jahitan tebal atau kasar yang dapat melukai kulit sensitif dan menyebabkan iritasi di area selangkangan.</span>
                            </li>
                        </ul>
                    </div>
                </div>

            </div>
        </div>

        <!-- AI Chat Window -->
        <div id="ai-chat-window" class="flex flex-col">
            <div class="bg-pink-600 dark:bg-pink-800 p-6 flex justify-between items-center text-white rounded-t-[28px]">
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 bg-white/20 rounded-2xl flex items-center justify-center shadow-inner">‚ú®</div>
                    <div>
                        <span class="font-bold block text-sm">Ukhti AI Konsultan</span>
                        <span class="text-[10px] text-pink-100">Online & Confidential</span>
                    </div>
                </div>
                <button onclick="toggleAIChat()" class="hover:rotate-90 transition-transform p-1">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                </button>
            </div>
            <div id="chat-messages" class="flex-grow p-6 overflow-y-auto text-sm space-y-6 bg-slate-50 dark:bg-slate-800">
                <div class="flex gap-3">
                    <div class="w-8 h-8 bg-pink-100 dark:bg-pink-900 rounded-full flex-shrink-0 flex items-center justify-center text-xs">AI</div>
                    <div class="bg-white dark:bg-slate-700 dark:text-slate-200 p-4 rounded-2xl rounded-tl-none shadow-sm border border-slate-100 dark:border-slate-600 max-w-[85%] leading-relaxed">
                        Assalamualaikum, Ukhti. Saya hadir untuk menemani belajarmu. Kamu bisa tanya apa saja secara anonim tentang kesehatan reproduksi, pubertas, atau keluhan kesehatan. InsyaAllah jawaban saya berbasis medis dan sopan. 
                    </div>
                </div>
                <div class="flex gap-3">
                    <div class="w-8 h-8 bg-pink-100 dark:bg-pink-900 rounded-full flex-shrink-0 flex items-center justify-center text-xs">AI</div>
                    <div class="bg-white dark:bg-slate-700 dark:text-slate-200 p-4 rounded-2xl rounded-tl-none shadow-sm border border-slate-100 dark:border-slate-600 max-w-[85%] leading-relaxed">
                        Maaf semuanya, karena AI ini masih tahap prototipe, kalian bisa kunjungi ke Gemini AI, insyaallah jawaban yang di berikan akan lebih akurat
                    </div>
                </div>
                <div class="flex gap-3">
                    <div class="w-8 h-8 bg-pink-100 dark:bg-pink-900 rounded-full flex-shrink-0 flex items-center justify-center text-xs">AI</div>
                    <div class="bg-white dark:bg-slate-700 dark:text-slate-200 p-4 rounded-2xl rounded-tl-none shadow-sm border border-slate-100 dark:border-slate-600 max-w-[85%] leading-relaxed">
                        Gemini AI<br>
                        <a href="https://gemini.google.com/" target="_blank" class="text-pink-600 dark:text-pink-300 font-bold hover:underline">https://gemini.google.com/</a>
                    </div>
                </div>
            </div>
            <div class="p-4 bg-white dark:bg-slate-800 border-t border-slate-100 dark:border-slate-700 flex gap-2">
                <input type="text" id="user-input" placeholder="Tanyakan kegalauanmu..." class="flex-grow bg-slate-100 dark:bg-slate-700 dark:text-white rounded-2xl px-5 py-3 text-sm focus:outline-none focus:ring-2 focus:ring-pink-300 transition-all">
                <button onclick="sendMessage()" class="bg-pink-600 text-white rounded-2xl w-12 h-12 flex items-center justify-center shadow-lg shadow-pink-200 dark:shadow-none hover:scale-105 active:scale-95 transition">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon></svg>
                </button>
            </div>
        </div>

    </main>

    <!-- Updated Navigation (Floating Dock Style) -->
    <nav class="fixed bottom-0 left-0 right-0 bg-white dark:bg-slate-900 h-20 shadow-[0_-4px_20px_rgba(0,0,0,0.05)] z-40 px-2 flex justify-around items-end pb-2 border-t border-slate-100 dark:border-slate-800 transition-colors duration-300">
        <!-- Button 1: Dasar -->
        <button onclick="navTo(1, 'Edukasi Kespro', 'Pahami dasar kesehatan tubuhmu.')" id="btn-1" class="btn-nav w-1/5 active-btn">
            <div class="icon-circle">
                <span class="text-xl">üìñ</span>
            </div>
            <span class="nav-label">Edukasi</span>
        </button>

        <!-- Button 2: Anatomi -->
        <button onclick="navTo(2, 'Eksplorasi Anatomi', 'Kenali fungsi setiap organ dalam.')" id="btn-2" class="btn-nav w-1/5">
            <div class="icon-circle">
                <span class="text-xl">üß¨</span>
            </div>
            <span class="nav-label">Anatomi</span>
        </button>

        <!-- Button 3: CALCULATOR (Center, Big) -->
        <button onclick="navTo('calc', 'Kalkulator Haid', 'Pantau siklus bulananmu dengan mudah.')" id="btn-calc" class="btn-nav w-1/5 center-btn">
            <div class="icon-circle">
                <span class="text-2xl">üìÖ</span>
            </div>
            <span class="nav-label">Siklus</span>
        </button>

        <!-- Button 4: Pembalut -->
        <button onclick="navTo(5, 'Bedah Material', 'Hati-hati dalam memilih produk.')" id="btn-5" class="btn-nav w-1/5">
            <div class="icon-circle">
                <span class="text-xl">ü©π</span>
            </div>
            <span class="nav-label">Pembalut</span>
        </button>

        <!-- Button 5: CD & Tips -->
        <button onclick="navTo(6, 'Higiene CD', 'Tips memilih celana dalam yang sehat.')" id="btn-6" class="btn-nav w-1/5">
            <div class="icon-circle">
                <span class="text-xl">ü©≤</span>
            </div>
            <span class="nav-label">Higiene</span>
        </button>
    </nav>

    <script>
        const apiKey = ""; 

        // Dark Mode Logic
        function toggleDarkMode() {
            document.documentElement.classList.toggle('dark');
        }

        // Calculator Logic
        function adjustCycle(amount) {
            const input = document.getElementById('calc-cycle');
            let val = parseInt(input.value) + amount;
            if (val < 20) val = 20;
            if (val > 45) val = 45;
            input.value = val;
        }

        function calculateCycle() {
            const dateStr = document.getElementById('calc-date').value;
            const cycleLen = parseInt(document.getElementById('calc-cycle').value);

            if (!dateStr) {
                alert("Mohon isi tanggal hari pertama haid terakhirmu ya, Ukhti.");
                return;
            }

            const hpht = new Date(dateStr);
            
            // 1. Calculate Main Dates
            const nextPeriod = new Date(hpht);
            nextPeriod.setDate(hpht.getDate() + cycleLen);

            const ovulationDay = new Date(nextPeriod);
            ovulationDay.setDate(nextPeriod.getDate() - 14);

            const fertileStart = new Date(ovulationDay);
            fertileStart.setDate(ovulationDay.getDate() - 2);
            
            const fertileEnd = new Date(ovulationDay);
            fertileEnd.setDate(ovulationDay.getDate() + 2);

            // 2. Format Display Text (Main Result)
            const options = { day: 'numeric', month: 'long', year: 'numeric' };
            const nextStr = nextPeriod.toLocaleDateString('id-ID', options);
            const fertileStr = `${fertileStart.toLocaleDateString('id-ID', { day: 'numeric', month: 'short' })} - ${fertileEnd.toLocaleDateString('id-ID', { day: 'numeric', month: 'short' })}`;

            document.getElementById('res-next-period').innerText = nextStr;
            document.getElementById('res-fertile').innerText = fertileStr;

            // 3. PHASE CALCULATION & INJECTION
            
            // Phase 1: Menstruasi (HPHT s/d +6 hari)
            const p1End = new Date(hpht);
            p1End.setDate(hpht.getDate() + 6);
            document.getElementById('date-phase-1').innerText = `${hpht.toLocaleDateString('id-ID', {day: 'numeric', month:'short'})} - ${p1End.toLocaleDateString('id-ID', {day: 'numeric', month:'short'})}`;

            // Phase 2: Folikuler (Setelah haid s/d sebelum ovulasi)
            const p2Start = new Date(p1End);
            p2Start.setDate(p1End.getDate() + 1);
            const p2End = new Date(ovulationDay);
            p2End.setDate(ovulationDay.getDate() - 1);
            document.getElementById('date-phase-2').innerText = `${p2Start.toLocaleDateString('id-ID', {day: 'numeric', month:'short'})} - ${p2End.toLocaleDateString('id-ID', {day: 'numeric', month:'short'})}`;

            // Phase 3: Ovulasi (Sekitar hari H ovulasi)
            // Kita tampilkan hari H ovulasi itu sendiri
            document.getElementById('date-phase-3').innerText = `${ovulationDay.toLocaleDateString('id-ID', {day: 'numeric', month:'long'})}`;

            // Phase 4: Luteal (Setelah ovulasi s/d sebelum haid berikutnya)
            const p4Start = new Date(ovulationDay);
            p4Start.setDate(ovulationDay.getDate() + 1);
            const p4End = new Date(nextPeriod);
            p4End.setDate(nextPeriod.getDate() - 1);
            document.getElementById('date-phase-4').innerText = `${p4Start.toLocaleDateString('id-ID', {day: 'numeric', month:'short'})} - ${p4End.toLocaleDateString('id-ID', {day: 'numeric', month:'short'})}`;

            // Show Result
            const resultDiv = document.getElementById('calc-result');
            resultDiv.classList.remove('hidden');
            resultDiv.scrollIntoView({ behavior: 'smooth' });
        }

        // AI Logic
        async function callGemini(prompt) {
            const systemPrompt = "Kamu adalah Ukhti AI, asisten kesehatan perempuan di lingkungan pesantren. Berikan penjelasan yang informatif, panjang, mendalam, dan menggunakan terminologi medis yang akurat namun disesuaikan dengan norma kesantunan santriwati. Jawablah dengan sangat detail.";
            try {
                let delay = 1000;
                for (let i = 0; i < 5; i++) {
                    const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            contents: [{ parts: [{ text: prompt }] }],
                            systemInstruction: { parts: [{ text: systemPrompt }] }
                        })
                    });
                    if (response.ok) {
                        const data = await response.json();
                        return data.candidates?.[0]?.content?.parts?.[0]?.text;
                    }
                    await new Promise(r => setTimeout(r, delay));
                    delay *= 2;
                }
            } catch (err) { return "Afwan Ukhti, koneksi AI sedang bermasalah. Coba lagi nanti ya."; }
        }

        async function sendMessage() {
            const input = document.getElementById('user-input');
            const msg = input.value.trim();
            if (!msg) return;

            const chat = document.getElementById('chat-messages');
            chat.innerHTML += `<div class="flex justify-end"><div class="bg-pink-600 text-white p-4 rounded-3xl rounded-tr-none max-w-[85%] shadow-md">${msg}</div></div>`;
            input.value = "";
            chat.scrollTop = chat.scrollHeight;

            const loading = document.createElement('div');
            loading.className = "flex gap-3 italic text-gray-400 text-xs px-2 animate-pulse";
            loading.innerText = "Ukhti AI sedang mencari referensi medis...";
            chat.appendChild(loading);

            const res = await callGemini(msg);
            loading.remove();

            chat.innerHTML += `<div class="flex gap-3"><div class="w-8 h-8 bg-pink-100 dark:bg-pink-900 rounded-full flex-shrink-0 flex items-center justify-center text-xs">AI</div><div class="bg-white dark:bg-slate-700 dark:text-slate-200 p-4 rounded-3xl rounded-tl-none shadow-sm border border-slate-100 dark:border-slate-600 max-w-[85%] leading-relaxed">${res}</div></div>`;
            chat.scrollTop = chat.scrollHeight;
        }

        function showDetail(title, desc) {
            const card = document.getElementById('detail-card');
            card.classList.add('animate__pulse');
            document.getElementById('detail-title').innerText = title;
            document.getElementById('detail-desc').innerText = desc;
            setTimeout(() => card.classList.remove('animate__pulse'), 1000);
        }

        function showMat(title, desc) {
            const box = document.getElementById('mat-info-box');
            box.classList.add('animate__headShake');
            document.getElementById('mat-title').innerText = title;
            document.getElementById('mat-desc').innerText = desc;
            setTimeout(() => box.classList.remove('animate__headShake'), 800);
        }

        function toggleAIChat() {
            const chat = document.getElementById('ai-chat-window');
            const isNone = chat.style.display === 'none' || chat.style.display === '';
            chat.style.display = isNone ? 'flex' : 'none';
        }

        function navTo(id, banner, sub) {
            document.querySelectorAll('.content-section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.btn-nav').forEach(b => b.classList.remove('active-btn'));
            
            // Handle ID specially because 'calc' is not a number
            const sectionId = (id === 'calc') ? 'section-calc' : 'section-' + id;
            const btnId = (id === 'calc') ? 'btn-calc' : 'btn-' + id;

            const sectionEl = document.getElementById(sectionId);
            if (sectionEl) sectionEl.classList.add('active');
            
            const btnEl = document.getElementById(btnId);
            if (btnEl) btnEl.classList.add('active-btn');
            
            document.getElementById('banner-title').innerText = banner;
            document.getElementById('banner-subtitle').innerText = sub;
            
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
    </script>
</body>
</html>

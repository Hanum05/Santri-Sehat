<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SantriSehat Pro: Panduan Lengkap Kespro ‚ú®</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Quicksand:wght@400;500;600;700&display=swap');
        
        body {
            font-family: 'Quicksand', sans-serif;
            background-color: #fffafb;
            color: #374151;
            scroll-behavior: smooth;
            padding-bottom: 120px; /* Extra padding for floating nav */
        }

        .interactive-svg:hover .part-shape {
            fill: #fb7185 !important;
            filter: drop-shadow(0 0 8px rgba(225, 29, 72, 0.4));
            cursor: pointer;
        }

        .content-section {
            display: none;
        }

        .content-section.active {
            display: block;
            animation: fadeInUp 0.5s ease-out;
        }

        /* Navigasi Custom Style */
        .nav-container {
            box-shadow: 0 -4px 20px rgba(0,0,0,0.05);
        }

        .btn-nav {
            position: relative;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-end;
            height: 100%;
        }

        /* Ikon Lingkaran Putih */
        .icon-circle {
            background-color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            border: 1px solid #fce7f3;
            position: absolute;
            transition: all 0.3s ease;
            z-index: 10;
        }

        /* Standard Icon Position (Halfway up) */
        .btn-nav .icon-circle {
            width: 48px;
            height: 48px;
            top: -24px; /* Setengah dari tinggi 48px agar pas di garis */
        }

        /* Center Button (Calculator) Position */
        .btn-nav.center-btn .icon-circle {
            width: 64px;
            height: 64px;
            top: -32px; /* Setengah dari tinggi 64px */
            background: linear-gradient(135deg, #ec4899 0%, #be123c 100%);
            color: white !important;
            border: 4px solid #fffafb;
            box-shadow: 0 10px 15px -3px rgba(219, 39, 119, 0.4);
        }

        .btn-nav.active-btn .icon-circle {
            transform: translateY(-5px);
            border-color: #db2777;
            box-shadow: 0 10px 15px -3px rgba(219, 39, 119, 0.2);
        }
        
        .btn-nav.active-btn:not(.center-btn) .icon-circle {
            background-color: #fff1f2;
            color: #db2777;
        }

        .nav-label {
            margin-top: 28px; /* Space for the floating icon */
            font-size: 10px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: -0.025em;
            color: #9ca3af;
            transition: color 0.3s;
        }

        .btn-nav.active-btn .nav-label {
            color: #db2777;
        }

        /* Chat Styles */
        #ai-chat-window {
            display: none;
            position: fixed;
            bottom: 100px; /* Adjusted for taller nav */
            right: 20px;
            left: 20px;
            max-width: 450px;
            height: 60vh;
            background: white;
            border-radius: 28px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.2);
            z-index: 100;
            flex-direction: column;
            border: 1px solid #fce7f3;
        }

        .materi-card {
            background: white;
            border-radius: 24px;
            padding: 24px;
            margin-bottom: 20px;
            border: 1px solid #f3f4f6;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
        }

        .info-pill {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 999px;
            font-size: 11px;
            font-weight: 700;
            text-transform: uppercase;
            margin-bottom: 8px;
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="min-h-screen">

    <!-- Header -->
    <header class="bg-white/90 backdrop-blur-md sticky top-0 z-50 px-6 py-4 flex justify-between items-center border-b border-pink-50 shadow-sm">
        <div class="flex items-center gap-3">
            <div class="w-10 h-10 bg-gradient-to-tr from-pink-500 to-rose-400 rounded-2xl flex items-center justify-center text-white font-bold shadow-lg">S</div>
            <div>
                <h1 class="font-bold text-pink-600 text-lg leading-none">SantriSehat</h1>
                <p class="text-[10px] text-gray-400 font-medium">Pro-Education v2.1</p>
            </div>
        </div>
        <button onclick="toggleAIChat()" class="flex items-center gap-2 bg-pink-50 text-pink-600 px-4 py-2 rounded-2xl text-xs font-bold hover:bg-pink-100 transition">
            <span class="animate-pulse">‚ú®</span> Tanya Ukhti AI
        </button>
    </header>

    <main class="max-w-2xl mx-auto p-4 md:p-8">

        <!-- Banner Utama -->
        <div class="relative overflow-hidden bg-gradient-to-br from-pink-500 to-rose-600 rounded-[2.5rem] p-8 mb-10 text-white shadow-2xl shadow-rose-200">
            <div class="relative z-10">
                <h2 id="banner-title" class="text-3xl font-bold mb-3">Ahlan wa Sahlan!</h2>
                <p id="banner-subtitle" class="text-pink-100 text-sm leading-relaxed max-w-[80%]">
                    Pusat informasi kesehatan reproduksi syar'i dan medis untuk santriwati cerdas.
                </p>
            </div>
            <!-- Hijabi Character SVG -->
            <div class="absolute right-[-10px] bottom-[-10px] opacity-20">
                <svg width="180" height="180" viewBox="0 0 100 100">
                    <circle cx="50" cy="40" r="30" fill="white" />
                    <path d="M20 40 Q20 5 50 5 Q80 5 80 40 L85 95 Q50 100 15 95 Z" fill="white" />
                </svg>
            </div>
        </div>

        <!-- SECTION 1: PENGERTIAN MENDALAM -->
        <div id="section-1" class="content-section active">
            <div class="materi-card">
                <span class="info-pill bg-blue-100 text-blue-700">Wawasan Dasar</span>
                <h3 class="text-2xl font-bold text-gray-800 mb-4">Apa itu Kesehatan Reproduksi?</h3>
                <p class="text-gray-600 leading-relaxed mb-4 text-justify">
                    Kesehatan Reproduksi (Kespro) seringkali disalahpahami hanya sebatas urusan "menikah" atau "melahirkan". Padahal, definisinya jauh lebih luas. Menurut Organisasi Kesehatan Dunia (WHO) dan kesepakatan medis internasional, Kespro adalah keadaan sejahtera secara utuh meliputi **fisik, mental, dan sosial**, bukan hanya sekadar bebas dari penyakit atau kecacatan dalam segala aspek yang berhubungan dengan sistem reproduksi, fungsi, serta prosesnya. 
                    <br><br>
                    Bagi seorang santriwati, memahami Kespro adalah implementasi nyata dari konsep *hifdzun nafs* (menjaga jiwa/diri) dan *hifdzun nasl* (menjaga keturunan). Ini adalah bentuk rasa syukur tertinggi kepada Allah SWT yang telah menitipkan amanah tubuh yang sempurna.
                </p>
                <!-- Existing sub-sections omitted for brevity but preserved logically -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-6">
                    <div class="bg-pink-50 p-6 rounded-2xl border border-pink-100">
                        <h4 class="font-bold text-pink-700 text-sm mb-3 flex items-center gap-2">
                            <span class="bg-pink-200 p-1 rounded">üè•</span> Aspek Fisik
                        </h4>
                        <p class="text-sm text-pink-800 leading-relaxed text-justify">
                            Meliputi kondisi organ vital yang berfungsi normal, bebas dari infeksi jamur, bakteri, atau virus, serta terhindar dari penyakit menular.
                        </p>
                    </div>
                    <div class="bg-indigo-50 p-6 rounded-2xl border border-indigo-100">
                        <h4 class="font-bold text-indigo-700 text-sm mb-3 flex items-center gap-2">
                            <span class="bg-indigo-200 p-1 rounded">üß†</span> Aspek Mental
                        </h4>
                        <p class="text-sm text-indigo-800 leading-relaxed text-justify">
                            Berkaitan dengan kesiapan psikologis dan emosional. Santriwati harus memiliki pengetahuan yang benar agar tidak merasa cemas atau takut.
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- SECTION 2: ANATOMI DETAIL -->
        <div id="section-2" class="content-section">
            <div class="text-center mb-8">
                <h3 class="text-2xl font-bold text-gray-800">Eksplorasi Anatomi Wanita</h3>
                <p class="text-gray-600 text-sm max-w-md mx-auto mt-2">Pahami keajaiban sistem penciptaan manusia dalam tubuhmu. Ketuk setiap bagian organ di bawah ini.</p>
            </div>

            <div class="bg-white rounded-[3rem] p-10 shadow-sm border border-pink-50 mb-8 flex justify-center relative overflow-hidden">
                <svg viewBox="0 0 220 200" width="100%" class="max-w-[320px] interactive-svg">
                    <!-- Uterus -->
                    <path class="part-shape transition-all duration-300" d="M80 70 Q110 45 140 70 L130 130 Q110 145 90 130 Z" fill="#fecdd3" stroke="#e11d48" stroke-width="2.5" onclick="showDetail('Rahim (Uterus)', 'Rahim adalah organ berotot tebal berbentuk seperti buah pir terbalik. Dinding rahim terdiri dari lapisan Endometrium yang luruh saat haid.')" />
                    <!-- Fallopian -->
                    <path class="part-shape" d="M80 75 Q45 55 30 85" fill="none" stroke="#e11d48" stroke-width="4.5" stroke-linecap="round" onclick="showDetail('Tuba Falopi', 'Saluran penghubung Ovarium ke Rahim, tempat terjadinya pembuahan.')" />
                    <path class="part-shape" d="M140 75 Q175 55 190 85" fill="none" stroke="#e11d48" stroke-width="4.5" stroke-linecap="round" onclick="showDetail('Tuba Falopi', 'Saluran ini berfungsi vital sebagai jembatan kehidupan.')" />
                    <!-- Ovaries -->
                    <circle class="part-shape" cx="30" cy="95" r="12" fill="#fb7185" onclick="showDetail('Ovarium', 'Pabrik sel telur dan penghasil hormon Estrogen & Progesteron.')" />
                    <circle class="part-shape" cx="190" cy="95" r="12" fill="#fb7185" onclick="showDetail('Ovarium', 'Melepaskan sel telur setiap bulan (Ovulasi).')" />
                    <!-- Vagina -->
                    <rect class="part-shape" x="95" y="135" width="30" height="45" rx="6" fill="#fbcfe8" stroke="#e11d48" stroke-width="1.5" onclick="showDetail('Vagina', 'Liang senggama yang menghubungkan rahim dengan luar tubuh. Memiliki pH asam alami.')" />
                    <!-- Labels -->
                    <text x="88" y="40" class="anatomy-label" style="fill:#9f1239; font-weight:bold; font-size:12px;">RAHIM</text>
                    <text x="5" y="125" class="anatomy-label" style="fill:#be123c; font-weight:bold; font-size:10px;">OVARIUM</text>
                    <text x="165" y="125" class="anatomy-label" style="fill:#be123c; font-weight:bold; font-size:10px;">OVARIUM</text>
                </svg>
            </div>

            <div id="detail-card" class="materi-card border-l-8 border-rose-500 bg-rose-50 min-h-[140px] transition-all duration-300">
                <h4 id="detail-title" class="font-bold text-rose-700 text-xl mb-3">Pilih Bagian Organ</h4>
                <p id="detail-desc" class="text-sm text-rose-800 leading-relaxed text-justify">Ketuk salah satu bagian diagram organ reproduksi di atas.</p>
            </div>
        </div>

        <!-- SECTION CALCULATOR: NEW FEATURE -->
        <div id="section-calc" class="content-section">
            <h3 class="text-2xl font-bold text-gray-800 mb-6 text-center">Kalkulator Siklus & Kesuburan</h3>
            
            <div class="materi-card border-t-8 border-rose-500 shadow-xl">
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-2">Hari Pertama Haid Terakhir (HPHT)</label>
                        <input type="date" id="calc-date" class="w-full p-4 rounded-xl border-2 border-pink-100 focus:border-pink-400 focus:outline-none bg-pink-50/50 text-gray-700 font-medium">
                    </div>
                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-2">Rata-rata Siklus (Hari)</label>
                        <div class="flex items-center gap-3">
                            <button onclick="adjustCycle(-1)" class="w-10 h-10 rounded-full bg-pink-100 text-pink-600 font-bold hover:bg-pink-200 transition">-</button>
                            <input type="number" id="calc-cycle" value="28" class="flex-grow p-4 rounded-xl border-2 border-pink-100 text-center font-bold text-lg text-pink-600 focus:outline-none" readonly>
                            <button onclick="adjustCycle(1)" class="w-10 h-10 rounded-full bg-pink-100 text-pink-600 font-bold hover:bg-pink-200 transition">+</button>
                        </div>
                        <p class="text-xs text-gray-400 mt-2 text-center">*Normalnya antara 21 - 35 hari</p>
                    </div>
                    
                    <button onclick="calculateCycle()" class="w-full bg-gradient-to-r from-rose-500 to-pink-500 text-white font-bold py-4 rounded-xl shadow-lg shadow-pink-200 hover:shadow-pink-300 active:scale-95 transition-all mt-4 text-lg flex items-center justify-center gap-2">
                        <span>üîç</span> Hitung Sekarang
                    </button>
                </div>
            </div>

            <!-- Result Box (Hidden by default) -->
            <div id="calc-result" class="hidden animate__animated animate__fadeInUp">
                <div class="bg-gradient-to-br from-indigo-500 to-purple-600 rounded-3xl p-6 text-white shadow-lg relative overflow-hidden mb-6">
                    <div class="relative z-10">
                        <p class="text-indigo-100 text-sm font-medium mb-1">Perkiraan Haid Berikutnya</p>
                        <h4 id="res-next-period" class="text-3xl font-bold mb-4">-- -- ----</h4>
                        
                        <div class="bg-white/10 rounded-xl p-4 backdrop-blur-sm border border-white/20">
                            <div class="flex items-center gap-3 mb-2">
                                <span class="text-xl">üå∏</span>
                                <span class="font-bold text-sm">Masa Subur (Ovulasi)</span>
                            </div>
                            <p id="res-fertile" class="text-sm opacity-90">-- s/d --</p>
                            <p class="text-[10px] mt-2 opacity-75 italic">*Hanya perkiraan, bukan alat kontrasepsi.</p>
                        </div>
                    </div>
                    <!-- Decoration -->
                    <div class="absolute -right-6 -top-6 w-32 h-32 bg-white/10 rounded-full blur-2xl"></div>
                </div>

                <div class="materi-card">
                    <h4 class="font-bold text-gray-800 mb-3">Apa artinya?</h4>
                    <p class="text-sm text-gray-600 leading-relaxed text-justify">
                        Mengetahui siklus haid membantu santriwati memprediksi kapan masa suci (untuk sholat/puasa) dan masa udzur datang. Jika haidmu sering terlambat lebih dari 35 hari atau lebih cepat dari 21 hari, konsultasikan ke dokter atau tanya Ukhti AI untuk info lebih lanjut.
                    </p>
                </div>
            </div>
        </div>

        <!-- SECTION 5: BAHAYA MATERIAL PEMBALUT -->
        <div id="section-5" class="content-section">
            <h3 class="text-2xl font-bold text-gray-800 mb-6 px-2">Analisis & Edukasi Material Pembalut</h3>
            <div class="materi-card">
                <p class="text-sm text-gray-600 mb-8 leading-relaxed text-justify">
                    Banyak santriwati yang tidak menyadari bahwa benda yang mereka pakai selama 24 jam saat haid, yakni pembalut sekali pakai, menyimpan risiko kesehatan tersembunyi.
                </p>
                <div class="relative py-10">
                    <div class="space-y-4">
                        <div class="bg-white border-2 border-slate-100 p-5 rounded-2xl shadow-sm hover:border-pink-300 hover:shadow-md transition cursor-pointer" onclick="showMat('1. Top Sheet', 'Bagian yang bersentuhan dengan kulit. Bahan plastik sintetis dapat menyebabkan iritasi.')">
                            <div class="flex justify-between items-center">
                                <div>
                                    <span class="font-bold text-slate-800 text-lg block">1. Top Sheet</span>
                                    <span class="text-xs text-slate-500">Kontak langsung</span>
                                </div>
                                <span class="text-[10px] bg-red-100 text-red-600 px-3 py-1 rounded-full font-bold">RISIKO IRITASI</span>
                            </div>
                        </div>
                        <div class="bg-white border-2 border-slate-100 p-5 rounded-2xl shadow-sm hover:border-pink-300 hover:shadow-md transition cursor-pointer" onclick="showMat('2. Absorbent Core', 'Sering mengandung Dioksin dari proses pemutihan klorin. Berisiko karsinogenik.')">
                            <div class="flex justify-between items-center">
                                <div>
                                    <span class="font-bold text-slate-800 text-lg block">2. Absorbent Core</span>
                                    <span class="text-xs text-slate-500">Penyerap cairan</span>
                                </div>
                                <span class="text-[10px] bg-amber-100 text-amber-600 px-3 py-1 rounded-full font-bold">BAHAYA DIOKSIN</span>
                            </div>
                        </div>
                        <div class="bg-white border-2 border-slate-100 p-5 rounded-2xl shadow-sm hover:border-pink-300 hover:shadow-md transition cursor-pointer" onclick="showMat('3. Back Sheet', 'Lapisan plastik kedap udara yang menyebabkan efek rumah kaca, memicu bakteri.')">
                            <div class="flex justify-between items-center">
                                <div>
                                    <span class="font-bold text-slate-800 text-lg block">3. Back Sheet</span>
                                    <span class="text-xs text-slate-500">Penahan bocor</span>
                                </div>
                                <span class="text-[10px] bg-blue-100 text-blue-600 px-3 py-1 rounded-full font-bold">EFEK RUMAH KACA</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="mat-info-box" class="bg-slate-50 p-6 rounded-3xl border border-slate-200 mt-4 min-h-[100px]">
                    <h4 id="mat-title" class="font-bold text-slate-800 mb-2">Info Lapisan</h4>
                    <p id="mat-desc" class="text-sm text-slate-600">Klik lapisan di atas untuk detail.</p>
                </div>
            </div>
        </div>

        <!-- SECTION 6: CELANA DALAM & HIGIENE -->
        <div id="section-6" class="content-section">
            <h3 class="text-2xl font-bold text-gray-800 mb-8 text-center">Panduan Memilih Pakaian Dalam</h3>
            <div class="grid grid-cols-1 gap-6">
                <div class="materi-card border-t-8 border-green-500 shadow-lg">
                    <div class="flex items-start gap-4">
                        <div class="w-16 h-16 bg-green-100 rounded-2xl flex items-center justify-center text-3xl shadow-sm">‚òÅÔ∏è</div>
                        <div>
                            <h4 class="font-bold text-gray-800 text-lg">Direkomendasikan: Katun</h4>
                            <p class="text-sm text-gray-600 mt-2 text-justify">Bahan katun berpori, menyerap keringat, dan mencegah jamur.</p>
                        </div>
                    </div>
                </div>
                <div class="materi-card border-t-8 border-red-500 shadow-lg">
                    <div class="flex items-start gap-4">
                        <div class="w-16 h-16 bg-red-100 rounded-2xl flex items-center justify-center text-3xl shadow-sm">üö´</div>
                        <div>
                            <h4 class="font-bold text-gray-800 text-lg">Hindari: Nilon/Satin</h4>
                            <p class="text-sm text-gray-600 mt-2 text-justify">Menahan panas dan lembap, memicu bakteri jahat.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- AI Chat Window -->
        <div id="ai-chat-window" class="flex flex-col">
            <div class="bg-pink-600 p-6 flex justify-between items-center text-white rounded-t-[28px]">
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 bg-white/20 rounded-2xl flex items-center justify-center shadow-inner">‚ú®</div>
                    <div>
                        <span class="font-bold block text-sm">Ukhti AI Konsultan</span>
                        <span class="text-[10px] text-pink-100">Online & Confidential</span>
                    </div>
                </div>
                <button onclick="toggleAIChat()" class="hover:rotate-90 transition-transform p-1">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                </button>
            </div>
            <div id="chat-messages" class="flex-grow p-6 overflow-y-auto text-sm space-y-6 bg-slate-50">
                <div class="flex gap-3">
                    <div class="w-8 h-8 bg-pink-100 rounded-full flex-shrink-0 flex items-center justify-center text-xs">AI</div>
                    <div class="bg-white p-4 rounded-2xl rounded-tl-none shadow-sm border border-slate-100 max-w-[85%] leading-relaxed">
                        Assalamualaikum, Ukhti. Saya hadir untuk menemani belajarmu. Kamu bisa tanya apa saja secara anonim tentang kesehatan reproduksi, pubertas, atau keluhan kesehatan. InsyaAllah jawaban saya berbasis medis dan sopan. 
                    </div>
                </div>
                <div class="flex gap-3">
                    <div class="w-8 h-8 bg-pink-100 rounded-full flex-shrink-0 flex items-center justify-center text-xs">AI</div>
                    <div class="bg-white p-4 rounded-2xl rounded-tl-none shadow-sm border border-slate-100 max-w-[85%] leading-relaxed">
                        Maaf semuanya, karena AI ini masih tahap prototipe, kalian bisa kunjungi ke Gemini AI, insyaallah jawaban yang di berikan akan lebih akurat
                    </div>
                </div>
                <div class="flex gap-3">
                    <div class="w-8 h-8 bg-pink-100 rounded-full flex-shrink-0 flex items-center justify-center text-xs">AI</div>
                    <div class="bg-white p-4 rounded-2xl rounded-tl-none shadow-sm border border-slate-100 max-w-[85%] leading-relaxed">
                        Gemini AI<br>
                        <a href="https://gemini.google.com/" target="_blank" class="text-pink-600 font-bold hover:underline">https://gemini.google.com/</a>
                    </div>
                </div>
            </div>
            <div class="p-4 bg-white border-t border-slate-100 flex gap-2">
                <input type="text" id="user-input" placeholder="Tanyakan kegalauanmu..." class="flex-grow bg-slate-100 rounded-2xl px-5 py-3 text-sm focus:outline-none focus:ring-2 focus:ring-pink-300 transition-all">
                <button onclick="sendMessage()" class="bg-pink-600 text-white rounded-2xl w-12 h-12 flex items-center justify-center shadow-lg shadow-pink-200 hover:scale-105 active:scale-95 transition">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon></svg>
                </button>
            </div>
        </div>

    </main>

    <!-- Updated Navigation (Floating Dock Style) -->
    <nav class="fixed bottom-0 left-0 right-0 bg-white h-20 shadow-[0_-4px_20px_rgba(0,0,0,0.05)] z-40 px-2 flex justify-around items-end pb-2 border-t border-slate-100">
        <!-- Button 1: Dasar -->
        <button onclick="navTo(1, 'Edukasi Kespro', 'Pahami dasar kesehatan tubuhmu.')" id="btn-1" class="btn-nav w-1/5 active-btn">
            <div class="icon-circle">
                <span class="text-xl">üìñ</span>
            </div>
            <span class="nav-label">Dasar</span>
        </button>

        <!-- Button 2: Anatomi -->
        <button onclick="navTo(2, 'Eksplorasi Anatomi', 'Kenali fungsi setiap organ dalam.')" id="btn-2" class="btn-nav w-1/5">
            <div class="icon-circle">
                <span class="text-xl">üß¨</span>
            </div>
            <span class="nav-label">Anatomi</span>
        </button>

        <!-- Button 3: CALCULATOR (Center, Big) -->
        <button onclick="navTo('calc', 'Kalkulator Haid', 'Pantau siklus bulananmu dengan mudah.')" id="btn-calc" class="btn-nav w-1/5 center-btn">
            <div class="icon-circle">
                <span class="text-2xl">üìÖ</span>
            </div>
            <span class="nav-label">Siklus</span>
        </button>

        <!-- Button 4: Pembalut -->
        <button onclick="navTo(5, 'Bedah Material', 'Hati-hati dalam memilih produk.')" id="btn-5" class="btn-nav w-1/5">
            <div class="icon-circle">
                <span class="text-xl">ü©π</span>
            </div>
            <span class="nav-label">Pembalut</span>
        </button>

        <!-- Button 5: CD & Tips -->
        <button onclick="navTo(6, 'Higiene CD', 'Tips memilih pakaian yang sehat.')" id="btn-6" class="btn-nav w-1/5">
            <div class="icon-circle">
                <span class="text-xl">ü©≤</span>
            </div>
            <span class="nav-label">Higiene</span>
        </button>
    </nav>

    <script>
        const apiKey = ""; 

        // Calculator Logic
        function adjustCycle(amount) {
            const input = document.getElementById('calc-cycle');
            let val = parseInt(input.value) + amount;
            if (val < 20) val = 20;
            if (val > 45) val = 45;
            input.value = val;
        }

        function calculateCycle() {
            const dateStr = document.getElementById('calc-date').value;
            const cycleLen = parseInt(document.getElementById('calc-cycle').value);

            if (!dateStr) {
                alert("Mohon isi tanggal hari pertama haid terakhirmu ya, Ukhti.");
                return;
            }

            const lastPeriod = new Date(dateStr);
            const nextPeriod = new Date(lastPeriod);
            nextPeriod.setDate(lastPeriod.getDate() + cycleLen);

            const ovulationDay = new Date(nextPeriod);
            ovulationDay.setDate(nextPeriod.getDate() - 14);

            const fertileStart = new Date(ovulationDay);
            fertileStart.setDate(ovulationDay.getDate() - 2);
            
            const fertileEnd = new Date(ovulationDay);
            fertileEnd.setDate(ovulationDay.getDate() + 2);

            // Format dates Indonesia
            const options = { day: 'numeric', month: 'long', year: 'numeric' };
            const nextStr = nextPeriod.toLocaleDateString('id-ID', options);
            const fertileStr = `${fertileStart.toLocaleDateString('id-ID', { day: 'numeric', month: 'short' })} - ${fertileEnd.toLocaleDateString('id-ID', { day: 'numeric', month: 'short' })}`;

            document.getElementById('res-next-period').innerText = nextStr;
            document.getElementById('res-fertile').innerText = fertileStr;

            const resultDiv = document.getElementById('calc-result');
            resultDiv.classList.remove('hidden');
            resultDiv.scrollIntoView({ behavior: 'smooth' });
        }

        // AI Logic
        async function callGemini(prompt) {
            const systemPrompt = "Kamu adalah Ukhti AI, asisten kesehatan perempuan di lingkungan pesantren. Berikan penjelasan yang informatif, panjang, mendalam, dan menggunakan terminologi medis yang akurat namun disesuaikan dengan norma kesantunan santriwati. Jawablah dengan sangat detail.";
            try {
                let delay = 1000;
                for (let i = 0; i < 5; i++) {
                    const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            contents: [{ parts: [{ text: prompt }] }],
                            systemInstruction: { parts: [{ text: systemPrompt }] }
                        })
                    });
                    if (response.ok) {
                        const data = await response.json();
                        return data.candidates?.[0]?.content?.parts?.[0]?.text;
                    }
                    await new Promise(r => setTimeout(r, delay));
                    delay *= 2;
                }
            } catch (err) { return "Afwan Ukhti, koneksi AI sedang bermasalah. Coba lagi nanti ya."; }
        }

        async function sendMessage() {
            const input = document.getElementById('user-input');
            const msg = input.value.trim();
            if (!msg) return;

            const chat = document.getElementById('chat-messages');
            chat.innerHTML += `<div class="flex justify-end"><div class="bg-pink-600 text-white p-4 rounded-3xl rounded-tr-none max-w-[85%] shadow-md">${msg}</div></div>`;
            input.value = "";
            chat.scrollTop = chat.scrollHeight;

            const loading = document.createElement('div');
            loading.className = "flex gap-3 italic text-gray-400 text-xs px-2 animate-pulse";
            loading.innerText = "Ukhti AI sedang mencari referensi medis...";
            chat.appendChild(loading);

            const res = await callGemini(msg);
            loading.remove();

            chat.innerHTML += `<div class="flex gap-3"><div class="w-8 h-8 bg-pink-100 rounded-full flex-shrink-0 flex items-center justify-center text-xs">AI</div><div class="bg-white p-4 rounded-3xl rounded-tl-none shadow-sm border border-slate-100 max-w-[85%] leading-relaxed">${res}</div></div>`;
            chat.scrollTop = chat.scrollHeight;
        }

        function showDetail(title, desc) {
            const card = document.getElementById('detail-card');
            card.classList.add('animate__pulse');
            document.getElementById('detail-title').innerText = title;
            document.getElementById('detail-desc').innerText = desc;
            setTimeout(() => card.classList.remove('animate__pulse'), 1000);
        }

        function showMat(title, desc) {
            const box = document.getElementById('mat-info-box');
            box.classList.add('animate__headShake');
            document.getElementById('mat-title').innerText = title;
            document.getElementById('mat-desc').innerText = desc;
            setTimeout(() => box.classList.remove('animate__headShake'), 800);
        }

        function toggleAIChat() {
            const chat = document.getElementById('ai-chat-window');
            const isNone = chat.style.display === 'none' || chat.style.display === '';
            chat.style.display = isNone ? 'flex' : 'none';
        }

        function navTo(id, banner, sub) {
            document.querySelectorAll('.content-section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.btn-nav').forEach(b => b.classList.remove('active-btn'));
            
            // Handle ID specially because 'calc' is not a number
            const sectionId = (id === 'calc') ? 'section-calc' : 'section-' + id;
            const btnId = (id === 'calc') ? 'btn-calc' : 'btn-' + id;

            const sectionEl = document.getElementById(sectionId);
            if (sectionEl) sectionEl.classList.add('active');
            
            const btnEl = document.getElementById(btnId);
            if (btnEl) btnEl.classList.add('active-btn');
            
            document.getElementById('banner-title').innerText = banner;
            document.getElementById('banner-subtitle').innerText = sub;
            
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
    </script>
</body>
</html>
